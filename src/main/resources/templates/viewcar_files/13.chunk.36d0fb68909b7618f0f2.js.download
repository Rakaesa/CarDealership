(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./data/models/partner-offer-model.js":function(e,t,a){"use strict";a.d(t,"i",function(){return I}),a.d(t,"j",function(){return A}),a.d(t,"g",function(){return k}),a.d(t,"h",function(){return V}),a.d(t,"b",function(){return x}),a.d(t,"c",function(){return L}),a.d(t,"d",function(){return w}),a.d(t,"e",function(){return R}),a.d(t,"f",function(){return U}),a.d(t,"a",function(){return D});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=(a("../node_modules/core-js/modules/es6.regexp.replace.js"),a("../node_modules/lodash/round.js")),o=a.n(i),l=a("../node_modules/lodash/isEmpty.js"),r=a.n(l),d=a("../node_modules/prop-types/index.js"),c=a.n(d),m=a("./data/api/api-client.js"),u=a("./data/luckdragon/segment.js"),p=a("./utils/event-toolbox.js"),b=a("./tracking/constant.js"),h=a("./site-modules/shared/constants/appraisal/appraisal.js"),E=a("./data/models/vehicle-vin.js"),_=a("./site-modules/shared/utils/vin-utils.js"),y=a("./data/api/api-metrics.js"),g=a("./utils/location.js");const S={Pragma:"no-cache","Cache-Control":"no-cache"},v=2017,f="honda",C="accord",N="EVAL-2682",T={action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.SYSTEM_ACTION_CATEGORY,action_cause:b.b.PAGE_LOAD_CAUSE,subaction_name:b.b.SUBACTION_EPO_VIN_ELIGIBILITY_CHECK},O={creative_id:h.c,action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.USER_ACTION_CATEGORY,action_cause:b.b.PAGE_LOAD_CAUSE,subaction_name:b.b.SUBACTION_EPO_MMY_ZIP_ELIGIBILITY_CHECK},I=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Object(g.a)(a).messageType,n="happy-path-mock"===s?{messageType:s}:{messageType:N,to:e,shortUrl:{ttl:"7d",url:t}};return m.c.fetchJson("/partner-offers/sms/messages",{headers:{"content-type":"application/json"},retries:0,method:"POST",body:JSON.stringify(n)})},A=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.vin,a=e.condition,i=void 0===a?"":a,l=e.conditionPricing,d=Object(n.a)(e,["vin","condition","conditionPricing"]);if(!t)throw new Error("Invalid VIN can't be submitted for partner offer appraisal");const c=t.toUpperCase(),u=JSON.stringify(Object(s.a)({condition:i,conditionPricing:l},d,{vin:c}));let E,_,y=b.b.NO_OFFER_CODE;try{E=await m.d.fetchJson("/appraisals",{headers:{"content-type":"application/json"},retries:1,method:"POST",body:u}),r()(E)||(E.valuation=(e=>{let t=e.valuation;return t?o()(t,-2):t})(E));const e=E,t=e.code,a=e.valuation;_=a&&0!==a?a:b.b.ZERO_VALUATION,t&&(y=t)}catch(e){E={},e.status&&(_=`${e.status}_ERROR`)}const g=l?l[i.toLowerCase()]||l[h.n.CLEAN.toLowerCase()]:0;if(!r()(E)){const e=E.declineReason;if(e){const t=E.valuation;p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:b.b.ACTION_APPRAISE_VEHICLE,action_category:b.b.SYSTEM_ACTION_CATEGORY,action_cause:b.b.PAGE_LOAD_CAUSE,subaction_name:b.b.SUBACTION_DECLINE_REASON_VALUE,creative_id:h.R,value:e}}),p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:b.b.ACTION_APPRAISE_VEHICLE,action_category:b.b.SYSTEM_ACTION_CATEGORY,action_cause:b.b.PAGE_LOAD_CAUSE,subaction_name:b.b.SUBACTION_DECLINE_REASON,creative_id:h.R,value:`${c}_epo_offer_eligibility_check_${t||0}_${e}`}})}i&&l&&p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.USER_ACTION_CATEGORY,action_cause:b.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:b.b.SUBACTION_TMV_APPRAISAL,creative_id:h.W,value:g}}),p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_END,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,subaction_name:b.b.SUBACTION_REDEMPTION_CERTIFICATE,action_category:b.b.USER_ACTION_CATEGORY,action_cause:b.b.ACTION_CAUSE_BUTTON_CLICK,creative_id:h.W,value:E.redemptionCertificateUri}})}g&&p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.USER_ACTION_CATEGORY,action_cause:b.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:b.b.SUBACTION_EPO_OFFER,creative_id:h.W,value:_}}),p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_END,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.USER_ACTION_CATEGORY,subaction_name:b.b.SUBACTION_OFFER_CODE,creative_id:h.W,value:y}});const S=E,v=S.sourceId,f=S.vin,C=S.valuation;return v&&p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_END,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,subaction_name:b.b.SUBACTION_SOURCE_ID,action_category:b.b.USER_ACTION_CATEGORY,creative_id:h.W,value:v}}),C>0&&f&&p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:b.b.ACTION_RECEIVE_EPO,action_category:b.b.USER_ACTION_CATEGORY,subaction_name:b.b.SUBACTION_EPO_OFFER_VIN,creative_id:h.W,value:f}}),g&&(_===b.b.ZERO_VALUATION||`${_}`.includes("_ERROR"))&&p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:b.b.USER_ACTION_CATEGORY,action_name:b.b.ACTION_RECEIVE_EPO,subaction_name:b.b.SUBACTION_VIN_ERROR,creative_id:h.W,value:`${t}_${b.b.SUBACTION_EPO_OFFER}_${_}`}}),E},j=e=>{return{id:e.id,name:e.name,addressLine1:e.address_line_1,addressLine2:e.address_line_2,city:e.city,state:e.state,zipCode:e.zip_code,longitude:e.longitude,latitude:e.latitude,message:e.message,storeUrl:e.store_url,distance:e.distance_in_miles}},P=async(e,t)=>{let a=e.make,n=e.model,i=e.year,o=e.zipCode,l=e.isEligibleHardcodeYmmBypass;const r=l?f:a,d=l?C:n,c=l?v:i;let u;try{u=await(t?Object(y.b)(m.d,t):m.d).fetchJson(`/eligibility?ZipCode=${o}&Make=${r}&Model=${d}&Year=${c}`,{}),l&&(u.reason=h.vb);const e=u,a=e.store,s=e.isEligible,n=e.reason,i=e.nearestStores;u={store:j(a),isEligible:!!s,reason:n,nearestStores:i.map(j)}}catch(e){u={isEligible:!1,reason:u&&u.reason||null,nearestStores:[]}}if(!l){let e;const t=u.store?u.store.message:void 0;e=u.isEligible?(e=>`${h.gb.mmy_zip_eligible}${e?`_${e.toLowerCase().replace(/\s|-/g,"_").replace(/\W/g,"")}`:""}`)(t):u.reason?u.reason:h.gb.mmy_zip_ineligible,p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_COMPLETED,event_data:Object(s.a)({},O,{value:e})})}return u},k=e=>e.partnerOffer?e.partnerOffer.licensePlateError:null,V=async e=>{let t;try{const a=t=await m.d.fetchJson("/vins/search-by-address",{headers:{"content-type":"application/json"},retries:0,method:"POST",body:JSON.stringify(e)}),s=a.vehicles,n=void 0===s?[]:s,i=a.message,o=void 0===i?"No VINs returned for address":i;if(!n.length)throw new Error(o);t={vehicles:n}}catch(e){t={vehicles:[]},p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_category:b.b.USER_ACTION_CATEGORY,action_cause:b.b.ACTION_CAUSE_BUTTON_CLICK,action_name:b.b.ACTION_RECEIVE_EPO,creative_id:h.K,value:`${e.status}_ERROR`}})}return t},x=Object(u.a)("partnerOffer",[{path:'zipCode["{zipCode}"].make["{make}"].model["{model}"].year["{year}"].isHardcodeBypassDisabled["{isEligibleHardcodeYmmDisabledTest}"].partnerOfferEligibilityResponse',async resolve(e,t){let a=e.make,s=e.model,n=e.year,i=e.zipCode,o=e.isEligibleHardcodeYmmDisabledTest,l=await P({make:a,model:s,year:n,zipCode:i},t);return l.isEligible||"true"===`${o}`||(l=await P({zipCode:i,isEligibleHardcodeYmmBypass:!0},t)),l}},{path:'vin["{vin}"].make["{make}"].model["{model}"].year["{year}"].isHardcodeBypass["{isEligibleHardcodeYmmBypass}"].trackingCreativeId["{trackingCreativeId}"].eligibility',async resolve(e,t){let a=e.vin,n=e.make,i=e.model,o=e.year,l=e.isEligibleHardcodeYmmBypass,r=e.trackingCreativeId;const d=await t.resolveValue(Object(E.c)({squishVin:Object(_.a)(a)}),E.b),c=!d.length||d.some(e=>{let t=e.makeName,a=void 0===t?"":t,s=e.modelName,l=void 0===s?"":s,r=e.year;return n&&n.toLowerCase()===a.toLowerCase()&&i&&i.toLowerCase()===l.toLowerCase()&&o===`${r}`});let u=!1,g=!0,S={};if(c){const e=await(async(e,t,a,n)=>{if(!e)throw new Error("Invalid VIN can't be used to determine partner offer eligibility");let i={isEligible:!0,reason:h.vb};if(!a)try{i=await(t?Object(y.b)(m.d,t):m.d).fetchJson(`/eligibility/${e.toUpperCase()}`,{})}catch(e){i={isEligible:!1}}const o=i,l=o.isEligible,r=o.reason,d=T;return d.creative_id=n,!l||a?(d.value=r||h.gb.api_failure,p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(s.a)({},d,{action_name:b.b.ACTION_APPRAISE_VEHICLE,subaction_name:a?b.b.SUBACTION_VIN_ENTRY_INELIGIBLE_MMY_ZIP:b.b.SUBACTION_VIN_ERROR,action_cause:a?b.b.ACTION_CAUSE_BUTTON_CLICK:d.action_cause,value:a?e:`${e}_${d.subaction_name}_${d.value}`})})):d.value=h.gb.vin_eligible,a||p.a.fireTrackAction({event_type:b.b.EVENT_TYPE_ACTION_COMPLETED,event_data:d}),i})(a,t,"true"===`${l}`,r),n=e.isEligible,i=e.reason,o=e.lastAppraisal;u=n,g="invalid-vin"!==i,S=n&&o&&o.vin===a&&o.conditionQuestionResponses||{}}return{isEligibleVin:u,isCheckDigitValid:g,isSquishVinValid:c,squishStyles:d,lastConditionQuestionResponses:S}}},{path:'vin.licensePlate["{licensePlate}"].stateCode["{stateCode}"]',async resolve(e,t){let a,s=e.licensePlate,n=e.stateCode;try{const e=a=await Object(y.b)(m.d,t).fetchJson("/vins/search-by-plate",{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify({plateNumber:s,plateState:n})}),i=e.vin,o=e.message,l=e.service;if(!i&&""!==i)throw new Error(o||"No VIN returned for licensePlate and stateCode");a={vin:i,service:l}}catch(e){await t.updateValue("licensePlateError",!0),a=void 0}return a}},{path:"licensePlateError"},{path:"conditionsQuestions",async resolve(e,t){let a;try{a=await Object(y.b)(m.e,t).fetchJson("/v2/conditions/questions")}catch(e){a=[]}return a}},{path:"conditionsQuestions.e2e",async resolve(e,t){let a;try{a=await Object(y.b)(m.e,t).fetchJson("/v2/conditions/questions",{headers:S})}catch(e){a=[]}return a}}]);function L(e){let t=e.licensePlate,a=e.stateCode;return t&&a?`vin.licensePlate["${t}"].stateCode["${a}"]`:""}function w(e){let t=e.make,a=e.model,s=e.year,n=e.zipCode,i=e.isEligibleHardcodeYmmDisabledTest;return t&&a&&s&&n?`zipCode["${n}"].make["${t}"].model["${a}"].year["${s}"].isHardcodeBypassDisabled["${void 0!==i&&i}"].partnerOfferEligibilityResponse`:""}function R(e){let t=e.make,a=e.model,s=e.year,n=e.vin,i=e.isEligibleHardcodeYmmBypass,o=void 0!==i&&i,l=e.trackingCreativeId,r=void 0===l?h.B:l;return t&&a&&s&&n?`vin["${n}"].make["${t}"].model["${a}"].year["${s}"].isHardcodeBypass["${o}"].trackingCreativeId["${r}"].eligibility`:""}function U(e){return`conditionsQuestions${Object(g.a)(e).e2e?".e2e":""}`}const D={Eligibility:c.a.shape({store:c.a.shape({name:c.a.string,addressLine1:c.a.string,addressLine2:c.a.string,longitude:c.a.number,latitude:c.a.number}),isEligible:c.a.bool,nearestStores:c.a.arrayOf(c.a.shape({}))}),VinEligibility:c.a.shape({isEligibleVin:c.a.bool,isSquishVinValid:c.a.bool,squishStyles:E.a.SquishStyles}),ConditionsQuestions:c.a.arrayOf(c.a.shape({id:c.a.number,desc:c.a.string,category:c.a.string,answerType:c.a.string,answers:c.a.arrayOf(c.a.shape({id:c.a.number,desc:c.a.string,answerType:c.a.string,detailQuestions:c.a.arrayOf(c.a.shape({id:c.a.number,desc:c.a.string,answerType:c.a.string,answers:c.a.arrayOf(c.a.shape({}))}))}))}))}},"./data/models/states.js":function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return c});var s=a("../node_modules/prop-types/index.js"),n=a.n(s),i=a("./data/luckdragon/segment.js"),o=a("./data/api/api-client.js"),l=a("./data/api/api-metrics.js");const r=n.a.shape({id:n.a.string,name:n.a.string,latitude:n.a.number,longitude:n.a.number,niceName:n.a.string,type:n.a.string,niceType:n.a.string,stateCode:n.a.string,population:n.a.number}),d={State:r,States:n.a.arrayOf(r)},c=Object(i.a)("states",[{path:"allStates",resolve:(e,t)=>Object(l.b)(o.c,t).fetchJson("/state/v2/")},{path:"allStateCodes",resolve:(e,t)=>Object(l.b)(o.c,t).fetchJson("/state/v2/?view=custom,fieldsInclude:stateCode&sortby=stateCode:ASC")}])},"./data/models/vehicle-vin.js":function(e,t,a){"use strict";a.d(t,"f",function(){return c}),a.d(t,"e",function(){return m}),a.d(t,"b",function(){return u}),a.d(t,"c",function(){return p}),a.d(t,"d",function(){return b}),a.d(t,"a",function(){return h});var s=a("../node_modules/lodash/get.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("./data/api/api-client.js"),r=a("./data/api/api-metrics.js"),d=a("./data/luckdragon/segment.js");const c=async(e,t)=>{let a;try{const s=t?await Object(r.b)(l.c,t):l.c;a=await s.fetchJson((e=>`/vehicle/v3/styles/vins/${e}`)(e))}catch(e){a=[]}return a},m=async e=>{let t;try{t=await l.c.fetchJson((e=>`/inventory/v5/universalvin/${e}?fields=vin,vehicleInfo.styleInfo,vehicleInfo.partsInfo,vehicleInfo.vehicleColors`)(e))}catch(e){t=[]}return t},u=Object(d.a)("vehicleVin",[{path:'squishVin["{squishVin}"].stylesBasicInfo',resolve:async(e,t)=>(async(e,t)=>{let a;try{const s=t?await Object(r.b)(l.c,t):l.c;a=await s.fetchJson((e=>`/vehicle/v3/styles?squishVins.squishVin=${e.toUpperCase()}&fields=id,year,makeNiceId,makeName,modelNiceId,modelName`)(e))}catch(e){a={}}return n()(a,"results",[])})(e.squishVin,t)},{path:'vin["{vin}"].stylesBasicInfo',async resolve(e,t){let a=e.vin;return c(a,t)}}]);function p(e){let t=e.squishVin;return t?`squishVin["${t}"].stylesBasicInfo`:""}function b(e){let t=e.vin;return t?`vin["${t}"].stylesBasicInfo`:""}const h={SquishStyles:o.a.arrayOf(o.a.shape({id:o.a.number,year:o.a.number,makeName:o.a.string,makeNiceId:o.a.string,modelName:o.a.string,modelNiceId:o.a.string}))}},"./site-modules/shared/components/appraisal/appraisal-tabs-container/appraisal-tabs-container.jsx":function(e,t,a){"use strict";var s=a("../node_modules/lodash/isEqual.js"),n=a.n(s),i=a("../node_modules/lodash/noop.js"),o=a.n(i),l=a("../node_modules/lodash/get.js"),r=a.n(l),d=a("../node_modules/react/index.js"),c=a.n(d),m=a("../node_modules/prop-types/index.js"),u=a.n(m),p=a("../node_modules/classnames/index.js"),b=a.n(p),h=a("../node_modules/react-redux/es/index.js"),E=a("../node_modules/reactstrap/lib/ButtonGroup.js"),_=a.n(E),y=a("../node_modules/reactstrap/lib/TabPane.js"),g=a.n(y),S=a("../node_modules/reactstrap/lib/TabContent.js"),v=a.n(S),f=a("../node_modules/reactstrap/lib/Row.js"),C=a.n(f),N=a("../node_modules/reactstrap/lib/Col.js"),T=a.n(N),O=a("./utils/location.js"),I=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-by-tabs-header-item.jsx"),A=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),j=a("../node_modules/lodash/isEmpty.js"),P=a.n(j),k=a("../node_modules/reactstrap/lib/Button.js"),V=a.n(k),x=a("./site-modules/shared/components/ymms-dropdowns/ymms-dropdowns.jsx"),L=(a("../node_modules/core-js/modules/es6.regexp.to-string.js"),a("../node_modules/reactstrap/lib/Form.js")),w=a.n(L),R=a("../node_modules/reactstrap/lib/FormGroup.js"),U=a.n(R),D=a("./site-modules/shared/components/field-error/field-error.jsx"),M=a("./constants/pub-states.js"),F=a("./site-modules/shared/components/vehicle-dropdowns/make-dropdown.jsx"),Y=a("./site-modules/shared/components/vehicle-dropdowns/model-dropdown.jsx"),B=a("./site-modules/shared/components/vehicle-dropdowns/year-dropdown.jsx");const $={Col:{PropTypes:u.a.shape({xs:u.a.number,md:u.a.number,lg:u.a.number,xl:u.a.number}),DefaultProps:{xs:12,md:null,lg:null,xl:null}}};class q extends d.Component{constructor(){super(...arguments),this.state={},this.onChange=(()=>{const e=this.state,t=e.make,a=e.model,s=e.year;this.props.onChange({make:t,model:a,year:s})}),this.setMake=(e=>{let t=e.slug;this.setState({make:t,model:null,year:null},this.onChange)}),this.setModel=(e=>{let t=e.slug;this.setState({model:t,year:null},this.onChange)}),this.setYear=(e=>{let t=e.year;this.setState({year:t},this.onChange)})}static getDerivedStateFromProps(e,t){const a=e.prepopulatedVehicle,s=a.year,n=a.makeSlug,i=a.modelSlug;if(n&&t.prevPrepopulatedVehicle!==e.prepopulatedVehicle){const t={year:s&&s.toString(),make:n,model:i};return t.prevPrepopulatedVehicle=e.prepopulatedVehicle,t}return{}}render(){const e=this.props,t=e.className,a=e.dropdownClassName,s=e.labelClassName,n=e.formGroupClassName,i=e.children,o=e.dropdownPlaceholders,l=e.dropdownLabels,r=e.dropdownTrackingIds,d=e.includeNextYear,m=e.displayError,u=e.errorMessages,p=e.hideLabels,b=e.earliestYear,h=e.rowClassName,E=e.colClassName,_=e.dropdownColSize,y=e.suffix,g=e.pubStates,S=this.state,v=S.make,f=S.model,N=S.submodel,O=S.style,I=S.year;return c.a.createElement(w.a,{autoComplete:"off",className:t},c.a.createElement(C.a,{className:h},c.a.createElement(T.a,Object(A.a)({},_.make,{className:E}),c.a.createElement(U.a,{className:n},c.a.createElement(F.b,{name:"select-make",toggle:o.make,labelText:l.make,valueKey:"slug",labelKey:"name",onChange:this.setMake,value:v,className:a,labelClassName:s,"data-tracking-id":r.make,id:`mmy-select-make${y}`,isLabelHidden:p,pubStates:g}),m.make&&c.a.createElement(D.a,{id:"makeError",classes:"mb-0 mt-0_25",error:u.make}))),c.a.createElement(T.a,Object(A.a)({},_.model,{className:E}),c.a.createElement(U.a,{className:n},c.a.createElement(Y.b,{make:v?{slug:v}:null,name:"select-model",toggle:o.model,labelText:l.model,valueKey:"slug",labelKey:"name",value:f,onChange:this.setModel,className:a,labelClassName:s,"data-tracking-id":r.model,id:`mmy-select-model${y}`,isLabelHidden:p,pubStates:g}),m.model&&c.a.createElement(D.a,{id:"modelError",classes:"mb-0 mt-0_25",error:u.model}))),c.a.createElement(T.a,Object(A.a)({},_.year,{className:E}),c.a.createElement(U.a,{className:n},c.a.createElement(B.a,{name:"select-year",toggle:o.year,labelText:l.year,valueKey:"year",labelKey:"year",make:v?{slug:v}:null,model:f?{slug:f}:null,value:I,onChange:this.setYear,onFocus:this.props.onFocus,className:a,labelClassName:s,"data-tracking-id":r.year,id:`mmy-select-year${y}`,isLabelHidden:p,includeNextYear:d,earliestYear:b,pubStates:g}),m.year&&c.a.createElement(D.a,{id:"yearError",classes:"mb-0 mt-0_25",error:u.year})))),i&&i({make:v,model:f,submodel:N,year:I,style:O}))}}q.propTypes={children:u.a.func,onChange:u.a.func,onFocus:u.a.func,className:u.a.string,dropdownClassName:u.a.string,labelClassName:u.a.string,formGroupClassName:u.a.string,prepopulatedVehicle:u.a.shape({submodels:u.a.shape({name:u.a.string,slug:u.a.string}),id:u.a.oneOfType([u.a.number,u.a.string]),year:u.a.oneOfType([u.a.number,u.a.string]),makeSlug:u.a.string,modelSlug:u.a.string,name:u.a.string}),dropdownPlaceholders:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),dropdownLabels:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),dropdownTrackingIds:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),errorMessages:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),displayError:u.a.shape({make:u.a.bool,model:u.a.bool,year:u.a.bool,style:u.a.bool}),useStyledSelects:u.a.bool,hasModelsDropdown:u.a.bool,hasSubmodelsDropdown:u.a.bool,hasStylesDropdown:u.a.bool,includeNextYear:u.a.bool,hideLabels:u.a.bool,earliestYear:u.a.number,useMostPopularStylesDropdown:u.a.bool,rowClassName:u.a.string,colClassName:u.a.string,dropdownColSize:u.a.shape({year:$.Col.PropTypes,make:$.Col.PropTypes,model:$.Col.PropTypes,submodel:$.Col.PropTypes,style:$.Col.PropTypes}),suffix:u.a.string,pubStates:u.a.arrayOf(u.a.string)},q.defaultProps={children:null,className:null,dropdownClassName:null,onChange:o.a,onFocus:o.a,labelClassName:"dropdown-label label text-gray-dark mb-0_5",formGroupClassName:"mb-0",prepopulatedVehicle:{},dropdownLabels:{},dropdownTrackingIds:{},dropdownPlaceholders:{make:"Select",model:"Select",submodel:"Select",year:"Select",style:"Select"},errorMessages:{make:"Please select a make",model:"Please select a model",year:"Please select a year"},displayError:{},useStyledSelects:!1,hasModelsDropdown:!1,hasSubmodelsDropdown:!0,hasStylesDropdown:!0,includeNextYear:!0,hideLabels:!1,earliestYear:1990,useMostPopularStylesDropdown:!1,rowClassName:null,colClassName:null,dropdownColSize:{year:$.Col.DefaultProps,make:$.Col.DefaultProps,model:$.Col.DefaultProps,submodel:$.Col.DefaultProps,style:$.Col.DefaultProps},suffix:"",pubStates:[M.a.NEW,M.a.NEW_USED,M.a.USED]};var H=a("./utils/event-toolbox.js"),W=a("./tracking/constant.js"),G=a("./site-modules/shared/utils/appraisal-link-constructor.js"),z=a("./site-modules/shared/components/spinner/spinner.jsx"),K=a("./site-modules/shared/components/link/link.jsx"),Q=a("./data/models/vehicle.js"),J=a("./data/luckdragon/redux/react-binding.jsx"),Z=a("./site-modules/shared/constants/appraisal/appraisal.js"),X=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx");const ee={make:"Please select a make",model:"Please select a model",year:"Please select a year"},te={year:"Select year",make:"Select make",model:"Select model"},ae={year:"Year",make:"Make",model:"Model"},se=[M.a.USED,M.a.NEW_USED],ne="ymm";class ie extends d.PureComponent{constructor(){super(...arguments),this.state={make:null,model:null,year:null,validated:!1,isRedirecting:!1,prepopulatedVehicle:void 0},this.onChange=(e=>{let t=e.make,a=e.model,s=e.year;return this.setState({make:t,model:a,year:s,validated:!1})}),this.setDefaultButtonStateForCachedPage=(e=>{e.persisted&&this.setRedirectingButtonStatus(!1)}),this.setPrepopulatedVehicle=(e=>{let t=e.make,a=e.model;const s={year:e.year,makeSlug:t,modelSlug:a};this.setState({prepopulatedVehicle:s})}),this.getAppraisalButton=(e=>{let t=e.make,a=e.model,s=e.year;const n=this.props,i=n.btnTrackingId,o=n.ctaText,l=n.isVdpEmbedded,r=n.isAppExtensionPage,d=this.state.isRedirecting;let m=null;t&&a&&s&&(m=Object(G.b)({make:t,model:a,year:s,isAppExtensionPage:r}));const u=l?{tag:"a",target:"_blank",href:m}:{tag:K.a,to:m};return c.a.createElement("div",null,c.a.createElement(V.a,Object(A.a)({},m?u:{},{onClick:m?this.trackAppraisalSubmit:this.validate,color:"success",className:"text-transform-none text-white btn-responsive-md-down","data-test":"appraise-btn","data-tracking-id":i,disabled:d}),d&&c.a.createElement("span",{className:"pr-0_5"},c.a.createElement(z.a,{size:14,thickness:1,color:"white"})),c.a.createElement("span",{className:"size-16"},o)))}),this.setRedirectingButtonStatus=(e=>this.setState({isRedirecting:e})),this.validate=(e=>{e.preventDefault();const t=this.state,a=t.make,s=t.model,n=t.year;this.setState({validated:!0}),this.setRedirectingButtonStatus(!!(a&&s&&n))}),this.trackAppraisalSubmit=(()=>{const e=this.state,t=e.make,a=e.model,s=e.year;this.setRedirectingButtonStatus(!!(t&&a&&s)),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_END,event_data:{action_category:W.b.USER_ACTION_CATEGORY,action_name:W.b.ACTION_APPRAISE_VEHICLE,action_cause:W.b.ACTION_CAUSE_LINK_CLICK,subaction_name:W.b.SUBMIT_VIN,creative_id:Z.e,value:ne}})})}componentDidMount(){const e=this.props.initialVehicle;P()(e)||(this.onChange(e),this.setPrepopulatedVehicle(e)),window.addEventListener("pageshow",this.setDefaultButtonStateForCachedPage)}componentDidUpdate(e){const t=this.props,a=t.vehicle,s=t.query;P()(a)||n()(e.vehicle,a)||(this.onChange(s),this.setPrepopulatedVehicle(s))}componentWillUnmount(){this.setRedirectingButtonStatus(!1),window.removeEventListener("pageshow",this.setDefaultButtonStateForCachedPage)}render(){const e=this.state,t=e.make,a=e.model,s=e.year,n=e.validated,i=e.prepopulatedVehicle,o=this.props,l=o.isFullWidth,r=o.isYearDropdownFirst,d={make:n&&!t,model:n&&!a,year:n&&!s},m={dropdownPlaceholders:te,dropdownLabels:ae,labelClassName:"size-12",includeNextYear:!1,formGroupClassName:"mb-1_5",onChange:this.onChange,errorMessages:ee,displayError:d,pubStates:se,prepopulatedVehicle:i};return c.a.createElement("div",{className:"appraise-by-mmy-tab"},c.a.createElement(X.a,{isFullWidth:l},r?c.a.createElement(x.a,Object(A.a)({useStyledSelects:!0,hasModelsDropdown:!0,hasSubmodelsDropdown:!1,hasStylesDropdown:!1},m),this.getAppraisalButton):c.a.createElement(q,m,this.getAppraisalButton)))}}ie.propTypes={isFullWidth:u.a.bool,ctaText:u.a.string,btnTrackingId:u.a.string,query:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.string}),vehicle:u.a.shape({id:u.a.number}),isVdpEmbedded:u.a.bool,isYearDropdownFirst:u.a.bool,isAppExtensionPage:u.a.bool,initialVehicle:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.oneOfType([u.a.number,u.a.string])})},ie.defaultProps={isFullWidth:!1,ctaText:"Appraise My Car",btnTrackingId:null,query:{},vehicle:{},isVdpEmbedded:!1,isYearDropdownFirst:!0,isAppExtensionPage:!1,initialVehicle:null};const oe={vehicle:Object(J.a)(e=>{let t=e.query,a=void 0===t?{}:t;const s=a.make,n=a.model,i=a.year;return s&&n&&i?Object(Q.u)({make:s,model:n,year:i}):""},Q.c)},le=Object(h.c)(e=>({isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(ie,oe));var re=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),de=a("./data/models/vehicle-vin.js"),ce=a("./site-modules/shared/utils/vin-utils.js"),me=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),ue=a("../node_modules/reactstrap/lib/Input.js"),pe=a.n(ue),be=a("./utils/history/venom-history.js"),he=a("./site-modules/shared/components/form-validation/validation.js"),Ee=a("./site-modules/shared/utils/appraisal/check-vin-inventory.js"),_e=a("./site-modules/shared/components/find-vin-modal/find-vin-modal.jsx"),ye=a("./site-modules/shared/utils/appraiser/appraiser-validation-helper.js"),ge=a("./utils/seed-randomizers.js");const Se={action_category:W.b.USER_ACTION_CATEGORY,action_cause:W.b.ACTION_CAUSE_USER_INPUT,action_name:W.b.ACTION_APPRAISE_VEHICLE};class ve extends d.Component{constructor(){super(...arguments),this.state={vin:Object(ye.q)(this.props.vin),wasFormSubmitted:!1,isVinValid:he.a.validateVIN(this.props.vin),isVinValidLength:he.a.validateVinLength(this.props.vin),isSubmitting:!1,styleIds:[],colorId:""},this.onChange=(e=>this.setState({vin:Object(ye.q)(e.target.value),wasFormSubmitted:!1,isSubmitting:!1},this.validate)),this.onSubmit=(async()=>{this.setState({wasFormSubmitted:!0,isSubmitting:!0});const e=this.state,t=e.vin,a=e.isVinValid,s=this.props,n=s.isStylesFromUniversalVinEnabled,i=s.setStylesAndVin,o=s.isLookUpStyleView,l=s.ctaText,d=s.creativeId;if(a){let e,a,s=[],c=[];if(n)s=(c=await Object(de.e)(t)).map(e=>r()(e,"vehicleInfo.styleInfo",{})).map(e=>({makeName:e.make,makeNiceId:e.makeNiceId,modelName:e.model,modelNiceId:e.modelNiceId,year:e.year,styleId:parseInt(e.styleId,10),styleName:e.style})),e=c.length>1?null:r()(c,"[0].vehicleInfo.vehicleColors.exterior.id",""),a=c.map(e=>r()(e,"vehicleInfo.styleInfo.styleId","")),H.a.fireTrackAction(Object(Z.nb)(a,d));else{const e=await Object(de.f)(t);s=e,a=e.map(e=>{return e.styleId})}return this.setState({styleIds:a,colorId:e}),i(s,t),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:d,subaction_name:W.b.SUBACTION_VIN_ENTRY,value:t})}),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_END,event_data:Object(me.a)({},Se,{creative_id:d,action_cause:W.b.ACTION_CAUSE_LINK_CLICK,subaction_name:W.b.SUBMIT_VIN,value:o?l:W.b.VIN})}),this.props.onVinChange(t)}return this.setState({isSubmitting:!1}),this.fireVinErrorTracking(W.b.SUBACTION_VIN_VALIDATION,W.b.VIN_FORMAT_INVALID)}),this.getAppraisalButton=(()=>{const e=this.props,t=e.ctaText,a=e.isVdpEmbedded,s=e.isLookUpStyleView,n=!this.isSquishVinInvalid()&&this.state.isSubmitting;return c.a.createElement("div",{className:b()({"mt-0_5":s})},c.a.createElement(V.a,{color:"success",className:b()("text-transform-none btn-responsive-sm-down",{"py-0_5":a}),"data-test":"appraise-btn-by-vin",onClick:this.onSubmit,disabled:n},n&&c.a.createElement("span",{className:"pr-0_5"},c.a.createElement(z.a,{size:14,thickness:1,color:"white"})),c.a.createElement("span",{className:"size-16"},t)))}),this.checkAndSetProfileOfferVin=(e=>{e&&(this.onChange({target:{value:e}}),this.props.isLookUpStyleView||H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:W.b.ACTION_APPRAISE_VEHICLE,action_category:W.b.USER_ACTION_CATEGORY,subaction_name:W.b.VIN_AUTOFILL,creative_id:Z.e}}))}),this.uniqInputId="",this.resetIsSubmitting=(()=>this.setState({isSubmitting:!1})),this.isSquishVinInvalid=(()=>{const e=this.props.squishStyles;return this.state.isVinValid&&e&&0===e.length}),this.validate=(()=>{const e=this.state.vin;this.setState({isVinValidLength:he.a.validateVinLength(e),isVinValid:he.a.validateVIN(e)})}),this.fireVinErrorTracking=((e,t)=>{const a=this.props.creativeId;H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:a,subaction_name:e,value:t})}),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:a,subaction_name:W.b.SUBACTION_VIN_ERROR,value:`${this.state.vin}_${e}_${t}`})})})}componentDidMount(){this.props.useUniqId&&(this.uniqInputId=Object(ge.c)())}componentDidUpdate(e){const t=this.props,a=t.squishStyles,s=t.isVdpEmbedded,n=t.isLookUpStyleView,i=t.creativeId,l=t.isAppExtensionPage,r=t.profileOfferVin,d=this.state,c=d.wasFormSubmitted,m=d.isVinValid,u=d.vin,p=d.styleIds,b=d.isSubmitting,h=d.colorId;if(e.profileOfferVin!==r&&this.checkAndSetProfileOfferVin(r),a&&c&&m)if(a.length>0){H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:i,action_category:W.b.SYSTEM_ACTION_CATEGORY,subaction_name:W.b.SUBACTION_SQUISHVIN_DECODE,value:a.length>1?W.b.MMY_MANY_FOUND:W.b.MMY_ONE_FOUND})});const e=a[0],t=e.makeNiceId,r=e.modelNiceId,d=e.year,c=Object(G.b)({make:t,model:r,year:d,queryParams:{vin:u,styleIds:p.join(","),colorId:h},isAppExtensionPage:l});s?(window.open(c,"_blank"),b&&this.resetIsSubmitting()):n||be.b.push(c),Object(Ee.a)(u,Z.e,o.a)}else this.fireVinErrorTracking(W.b.SUBACTION_SQUISHVIN_DECODE,W.b.MMY_NOT_FOUND)}componentWillUnmount(){this.setState({isSubmitting:!1})}render(){const e=this.state,t=e.vin,a=e.isVinValid,s=e.isVinValidLength,n=e.wasFormSubmitted,i=this.props,o=i.squishStyles,l=i.isLookUpStyleView,r=i.isFullWidth,d=i.profileOfferVin,m=n&&(!a||o&&0===o.length),u=`vin-number${this.uniqInputId}`,p=!d&&!l;return c.a.createElement("div",{className:"appraise-by-vin-tab"},c.a.createElement(X.a,{isFullWidth:r},c.a.createElement(C.a,null,c.a.createElement(T.a,{xs:12},c.a.createElement(U.a,{className:b()("styled-input",{"has-danger":m})},c.a.createElement(pe.a,{name:u,id:u,type:"text",className:"form-control text-uppercase vin-number",value:t,onChange:this.onChange,maxLength:Z.cb,minLength:Z.cb,placeholder:"Enter VIN","aria-label":"vin number"}),m&&c.a.createElement("div",{className:"value-error-text text-danger small mt-0_5"},s&&!a&&c.a.createElement("div",null,Z.sb),!s&&c.a.createElement("div",null,Z.tb),this.isSquishVinInvalid()&&c.a.createElement("div",null,Z.ub)))))),p&&c.a.createElement(_e.a,{className:"mb-1 p-0 border-0 text-primary-darker text-transform-none size-16 find-vin-modal-open-btn",creativeId:Z.e}),this.getAppraisalButton())}}ve.propTypes={onVinChange:u.a.func.isRequired,setStylesAndVin:u.a.func,squishStyles:u.a.arrayOf(u.a.shape({id:u.a.number,year:u.a.number,makeName:u.a.string,makeNiceId:u.a.string,modelName:u.a.string,modelNiceId:u.a.string})),ctaText:u.a.string,vin:u.a.string,profileOfferVin:u.a.string,creativeId:u.a.string,isVdpEmbedded:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,isLookUpStyleView:u.a.bool,isFullWidth:u.a.bool,useUniqId:u.a.bool,isAppExtensionPage:u.a.bool},ve.defaultProps={squishStyles:null,creativeId:Z.e,setStylesAndVin:o.a,ctaText:"Appraise My Car",vin:"",profileOfferVin:"",isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,isLookUpStyleView:!1,isFullWidth:!1,useUniqId:!1,isAppExtensionPage:!1};const fe={squishStyles:Object(J.a)(e=>{let t=e.vin;return Object(de.c)({squishVin:Object(ce.a)(t)})},de.b)},Ce=e=>(e&&e.vin||"").toUpperCase(),Ne=Object(h.c)(e=>({isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(ve,fe));class Te extends d.PureComponent{constructor(){super(...arguments),this.state={vin:Ce(this.props.query)||this.props.profileOfferVin},this.onVinChange=(e=>this.setState({vin:e}))}render(){const e=this.props,t=e.isSellCar,a=e.isMobile,s=e.ctaText,n=e.isVdpEmbedded,i=e.isStylesFromUniversalVinEnabled,o=e.setStylesAndVin,l=e.profileOfferVin,r=Object(re.a)(e,["isSellCar","isMobile","ctaText","isVdpEmbedded","isStylesFromUniversalVinEnabled","setStylesAndVin","profileOfferVin"]);return c.a.createElement(Ne,Object(A.a)({vin:this.state.vin,onVinChange:this.onVinChange,isSellCar:t,isMobile:a,ctaText:s,isVdpEmbedded:n,isStylesFromUniversalVinEnabled:i,setStylesAndVin:o,profileOfferVin:l},r))}}Te.propTypes={isSellCar:u.a.bool,isMobile:u.a.bool,ctaText:u.a.string,isVdpEmbedded:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,query:u.a.shape({vin:u.a.string}),setStylesAndVin:u.a.func,profileOfferVin:u.a.string},Te.defaultProps={isSellCar:!1,isMobile:!1,ctaText:"Appraise My Car",isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,query:{},setStylesAndVin:o.a,profileOfferVin:""};var Oe=a("./data/models/partner-offer-model.js"),Ie=a("./data/models/states.js"),Ae=a("./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.jsx");const je={stateCodes:Object(J.a)("allStateCodes",Ie.b),squishStyles:Object(J.a)(e=>{let t=e.vin;return Object(de.c)({squishVin:Object(ce.a)(t)})},de.b),vinFromLicensePlate:Object(J.a)(e=>{let t=e.licensePlate,a=e.stateCode;return Object(Oe.c)({licensePlate:t,stateCode:a})},Oe.b)},Pe=Object(h.c)(e=>({licensePlateLookupError:Object(Oe.g)(e),isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(Ae.a,je));class ke extends d.PureComponent{constructor(){super(...arguments),this.state={vin:"",licensePlate:"",stateCode:""},this.setVin=(e=>{this.setState({vin:e})}),this.setLicensePlateAndStateCode=(e=>{let t=e.licensePlate,a=e.stateCode;return this.setState({licensePlate:t,stateCode:a})}),this.clearVin=(()=>this.setState({vin:"",licensePlate:null,stateCode:null}))}render(){const e=this.props,t=e.isMobile,a=e.creativeId,s=e.ctaText,n=e.isVdpEmbedded,i=e.vinTabLink,o=e.isStylesFromUniversalVinEnabled,l=e.setStylesAndVin,r=Object(re.a)(e,["isMobile","creativeId","ctaText","isVdpEmbedded","vinTabLink","isStylesFromUniversalVinEnabled","setStylesAndVin"]),d=this.state,m=d.vin,u=d.licensePlate,p=d.stateCode;return c.a.createElement(Pe,Object(A.a)({vin:m,setVin:this.setVin,clearVin:this.clearVin,isMobile:t,ctaText:s,creativeId:a,isVdpEmbedded:n,vinTabLink:i,setLicensePlateAndStateCode:this.setLicensePlateAndStateCode,licensePlate:u,stateCode:p,isStylesFromUniversalVinEnabled:o,setStylesAndVin:l},r))}}ke.propTypes={isMobile:u.a.bool,isVdpEmbedded:u.a.bool,isLookUpStyleView:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,ctaText:u.a.string,creativeId:u.a.string,vinTabLink:u.a.oneOfType([u.a.node,u.a.func]),setStylesAndVin:u.a.func},ke.defaultProps={isMobile:!1,isVdpEmbedded:!1,isLookUpStyleView:!1,isStylesFromUniversalVinEnabled:!1,ctaText:void 0,creativeId:void 0,vinTabLink:null,setStylesAndVin:o.a};var Ve=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraisal-tab-link/appraisal-tab-link.jsx"),xe=a("./site-modules/shared/components/appraisal/appraisal-tabs/constants.js"),Le=a("./site-modules/shared/components/appraisal/appraisal-utm-storage/appraisal-utm-storage.js");a("./site-modules/shared/components/appraisal/appraisal-tabs-container/appraisal-tabs-container.scss");a.d(t,"c",function(){return we}),a.d(t,"g",function(){return Re}),a.d(t,"b",function(){return Ue}),a.d(t,"f",function(){return Me}),a.d(t,"d",function(){return Ye}),a.d(t,"e",function(){return Be}),a.d(t,"a",function(){return He});const we="MMY",Re="VIN",Ue="LICENSE_PLATE",De={id:we,label:"Year/Make/Model",secondaryLinkLabel:"Year, Make & Model",TabComponent:le},Me={id:Re,label:"VIN",secondaryLinkLabel:"VIN",TabComponent:Te},Fe={id:Ue,label:"License Plate",secondaryLinkLabel:"License Plate",TabComponent:ke},Ye={DEFAULT:[De,Me,Fe],LICENSE_PLATE:[Fe,Me,De],YMM_SUPPRESSED:[Fe,Me],VIN:[Me,Fe,De]},Be={[we]:{FIRST:Fe,SECOND:Me},[Re]:{FIRST:Me,SECOND:Fe},[Ue]:{FIRST:Fe,SECOND:Me}},$e=e=>{let t=e.hasVinQuery,a=e.isLicensePlateTabDefault,s=e.hasMMYQuery,n=e.isLookUpStyleView,i=e.initialActiveTabId;return n?i:t?Re:a&&!s?Ue:we};class qe extends d.Component{constructor(e){super(e),this.setActiveTab=(e=>this.setState({activeTabId:e})),this.getEdmundsLogo=(()=>c.a.createElement("div",null,c.a.createElement("div",{className:"d-inline-flex p-0_25 align-items-center text-primary mb-0_25 bg-transparent size-16 font-weight-normal"},c.a.createElement("i",{className:"icon-edmunds-car size-30 mr-0_25"}),c.a.createElement("span",{className:"pl-0_5"},"Did you know?")))),this.buildTabsFromProps=(e=>{const t=e.location,a=e.isSellCar,s=e.referer,n=e.isLicensePlateTabDefault,i=e.initialActiveTabId,o=e.isLookUpStyleView,l=Object(O.a)(t),r=l.make,d=l.model,c=l.year,m=l.vin,u=l.tab,p=r&&d&&c,b=!!m;let h=u&&u.toUpperCase();xe.c.includes(h)||(h=null);const E=!a&&s&&s.includes("edmunds.com"),_=h===xe.a||null===h&&(n||E);let y=_?Ye.LICENSE_PLATE:Ye.DEFAULT;return o&&(y=n?Ye.YMM_SUPPRESSED:[...Ye.YMM_SUPPRESSED].reverse()),{tabs:y,activeTabId:$e({isLicensePlateTabDefault:_,hasMMYQuery:p,hasVinQuery:b,isLookUpStyleView:o,initialActiveTabId:i})}}),this.fireTabTracking=((e,t)=>{H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_category:W.b.SYSTEM_ACTION_CATEGORY,action_cause:W.b.PAGE_LOAD_CAUSE,action_name:W.b.ACTION_SHOW_CONTENT,subaction_name:W.b.TAB_DEFAULT,creative_id:this.props.creativeId,value:e.find(e=>{return e.id===t}).label}})}),this.handleTabLinkClick=(e=>{const t=e.currentTarget.dataset.tabId;this.setActiveTab(t)}),this.renderTabContent=(()=>{const e=this.props,t=e.isMobile,a=e.isSellCar,s=e.creativeId,n=e.ctaText,i=e.location,o=e.isVdpEmbedded,l=e.isYearDropdownFirst,r=e.initialStateCode,d=e.initialVehicle,m=e.isLookUpStyleView,u=e.setStylesAndVin,p=e.isFullWidth,b=e.isProfileOfferVinPrepopulationEnabled,h=e.profileOfferVin,E=Object(O.a)(i),_=this.state,y=_.tabs,S=_.activeTabId;return c.a.createElement(v.a,{activeTab:S},y.map(e=>{let i=e.id,_=e.TabComponent;return c.a.createElement(g.a,{tabId:i,key:`tab-${i}`,"data-test":`tab-${i}`},c.a.createElement(_,{isMobile:t,isSellCar:a,creativeId:s,ctaText:n,query:E,isVdpEmbedded:o,isYearDropdownFirst:l,initialStateCode:r,initialVehicle:d,setStylesAndVin:u,isLookUpStyleView:m,isFullWidth:p,useUniqId:m,profileOfferVin:b?h:void 0,vinTabLink:c.a.createElement(Ve.a,{classNames:"text-decoration-underline",onClick:this.handleTabLinkClick,tabLink:Me})}))}))}),this.state=this.buildTabsFromProps(e),Le.a.checkAndSetSemCampaignAppraisals(this.props.location),Le.a.checkAndSetSemCampaignFacebook(this.props.location)}componentDidMount(){const e=this.state,t=e.tabs,a=e.activeTabId,s=this.props,n=s.isLookUpStyleView,i=s.setUtmAccountAppraisal,o=s.setUtmSourceFacebook;i(Le.a.isSemCampaignAppraisals),o(Le.a.isSemCampaignFacebook),n||this.fireTabTracking(t,a)}componentDidUpdate(e){const t=this.state,a=t.tabs,s=t.activeTabId,i=this.props,o=i.isVisibleInDrawer,l=i.isProfileOfferVinPrepopulationEnabled,r=i.profileOfferVin;o&&!n()(e.isVisibleInDrawer,o)&&this.fireTabTracking(a,s),l&&e.profileOfferVin!==r&&r&&this.setActiveTab(Re)}render(){const e=this.props,t=e.creativeId,a=e.className,s=e.title,n=e.isLookUpStyleView,i=e.hideEdmundsLogo,o=this.state,l=o.tabs,r=o.activeTabId;return c.a.createElement("div",{id:"appraisal-tabs-container",className:b()("appraisal-tabs-container",a,{"rounded p-1 p-md-1_5":!n}),"data-tracking-parent":t},s&&c.a.createElement("div",{className:"heading-4 mb-1_5"},s),c.a.createElement("div",{className:b()(`d-flex ${xe.b}`,{"mb-1 mb-lg-1_5":n})},n&&c.a.createElement("span",{className:"medium text-gray-darker font-weight-bold d-inline-block pb-0_5 mr-0_5"},"Enter by:"),c.a.createElement(_.a,{size:"md",role:"tablist"},l.map((e,t)=>{let a=e.id,s=e.label;return c.a.createElement(I.a,{key:a,label:s,tabId:a,isActive:a===r,onBtnClick:this.setActiveTab,isFirstItem:0===t})}))),n?null:c.a.createElement(C.a,null,c.a.createElement(T.a,{xs:12,className:"appraisal-tab-link-copy text-gray-dark size-14 mt-1 mb-1_5",role:"tablist"},!i&&this.getEdmundsLogo(),c.a.createElement("span",null,"By entering your "),r===we?c.a.createElement(Ve.a,{onClick:this.handleTabLinkClick,tabLink:Be[r].FIRST}):Be[r].FIRST.label," or ",c.a.createElement(Ve.a,{onClick:this.handleTabLinkClick,tabLink:Be[r].SECOND}),c.a.createElement("span",null,", you\u2019ll get a more accurate appraisal that may raise your car's value."))),this.renderTabContent())}}qe.propTypes={isMobile:u.a.bool,isLookUpStyleView:u.a.bool,isSellCar:u.a.bool,creativeId:u.a.string,ctaText:u.a.string,isLicensePlateTabDefault:u.a.bool,location:u.a.shape({}),referer:u.a.string,className:u.a.string,title:u.a.oneOfType([u.a.string,u.a.node]),initialActiveTabId:u.a.string,isVdpEmbedded:u.a.bool,isYearDropdownFirst:u.a.bool,initialStateCode:u.a.string,initialVehicle:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.oneOfType([u.a.number,u.a.string])}),setStylesAndVin:u.a.func,isFullWidth:u.a.bool,isVisibleInDrawer:u.a.bool,setUtmAccountAppraisal:u.a.func,setUtmSourceFacebook:u.a.func,isProfileOfferVinPrepopulationEnabled:u.a.bool,profileOfferVin:u.a.string,hideEdmundsLogo:u.a.bool},qe.defaultProps={isMobile:!1,isLookUpStyleView:!1,isSellCar:!1,isVdpEmbedded:!1,isYearDropdownFirst:!0,creativeId:Z.e,ctaText:"See your car's value",isLicensePlateTabDefault:!1,location:{},referer:void 0,title:"",initialStateCode:"",className:"",initialActiveTabId:Ue,initialVehicle:null,setStylesAndVin:o.a,isFullWidth:!1,isVisibleInDrawer:!1,setUtmAccountAppraisal:o.a,setUtmSourceFacebook:o.a,isProfileOfferVinPrepopulationEnabled:!1,profileOfferVin:"",hideEdmundsLogo:!1};const He=Object(h.c)(e=>({location:r()(e,"pageContext.location"),referer:r()(e,"pageContext.page.referer"),profileOfferVin:r()(e,"profile.data.idm.appraisalOffersHistory[0].vin")}))(qe)},"./site-modules/shared/components/appraisal/appraisal-tabs/appraisal-tab-link/appraisal-tab-link.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return d});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l);class d extends s.PureComponent{constructor(){super(...arguments),this.handleClick=(e=>{e.preventDefault(),this.props.onClick(e)})}render(){const e=this.props,t=e.tabLink,a=t.id,s=t.secondaryLinkLabel,i=e.classNames;return n.a.createElement("a",{className:r()("text-primary-darker",i),role:"tab",href:"#appraisal-tabs-container",onClick:this.handleClick,"data-tab-id":a,rel:"nofollow","data-tracking-id":"appraisal_tab_selected"},s)}}d.propTypes={onClick:o.a.func.isRequired,tabLink:o.a.shape({id:o.a.string,secondaryLinkLabel:o.a.string}).isRequired,classNames:o.a.string},d.defaultProps={classNames:""}},"./site-modules/shared/components/appraisal/appraisal-tabs/appraise-by-tabs-header-item.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return u});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/react/index.js"),i=a.n(n),o=a("../node_modules/prop-types/index.js"),l=a.n(o),r=a("../node_modules/reactstrap/lib/Button.js"),d=a.n(r),c=a("../node_modules/classnames/index.js"),m=a.n(c);class u extends n.PureComponent{constructor(){super(...arguments),this.handleClick=(()=>{this.props.onBtnClick(this.props.tabId)})}render(){const e=this.props,t=e.isActive,a=e.label,n=e.tabId,o=e.isFirstItem,l=e.isAppraisalValuePage?{"px-0_5":!o,"pl-0 pr-0_5":o}:{"px-0_5 px-md-0_75":!o,"pl-0 pr-0_5 pr-md-0_75":o};return i.a.createElement(d.a,{role:"tab",className:m()("appraise-by-tab-control size-16 text-decoration-none border-0 pt-0 pb-0_5 text-gray-darker",Object(s.a)({active:t},l)),onClick:this.handleClick,"data-test":`tab-${n}`,"data-tracking-id":"appraisal_tab_selected","data-tracking-value":a},i.a.createElement("span",{className:"appraise-by-tab-label font-weight-normal text-capitalize"},a))}}u.propTypes={tabId:l.a.string.isRequired,label:l.a.string.isRequired,onBtnClick:l.a.func.isRequired,isActive:l.a.bool,isFirstItem:l.a.bool,isAppraisalValuePage:l.a.bool},u.defaultProps={isActive:!1,isFirstItem:!1,isAppraisalValuePage:!1}},"./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return m});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/reactstrap/lib/Row.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Col.js"),c=a.n(d);class m extends s.PureComponent{render(){const e=this.props,t=e.isFullWidth,a=e.children;return t?n.a.createElement("div",null,a):n.a.createElement(r.a,null,n.a.createElement(c.a,{xs:12,md:9,lg:8},a))}}m.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,isFullWidth:o.a.bool},m.defaultProps={isFullWidth:!1}},"./site-modules/shared/components/appraisal/appraisal-tabs/constants.js":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return n}),a.d(t,"c",function(){return i});const s="appraise-by-tabs-headers",n="LP",i=["MMY",n]},"./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.jsx":function(e,t,a){"use strict";var s=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),i=a("../node_modules/lodash/get.js"),o=a.n(i),l=a("../node_modules/lodash/noop.js"),r=a.n(l),d=a("../node_modules/lodash/isEmpty.js"),c=a.n(d),m=a("../node_modules/lodash/isEqual.js"),u=a.n(m),p=a("../node_modules/react/index.js"),b=a.n(p),h=a("../node_modules/prop-types/index.js"),E=a.n(h),_=a("../node_modules/classnames/index.js"),y=a.n(_),g=a("../node_modules/reactstrap/lib/Form.js"),S=a.n(g),v=a("../node_modules/reactstrap/lib/Row.js"),f=a.n(v),C=a("../node_modules/reactstrap/lib/Col.js"),N=a.n(C),T=a("../node_modules/reactstrap/lib/Input.js"),O=a.n(T),I=a("../node_modules/reactstrap/lib/FormGroup.js"),A=a.n(I),j=a("../node_modules/reactstrap/lib/Label.js"),P=a.n(j),k=a("../node_modules/reactstrap/lib/Button.js"),V=a.n(k),x=a("./data/models/states.js"),L=a("./data/models/partner-offer-model.js"),w=a("./utils/history/venom-history.js"),R=a("./utils/event-toolbox.js"),U=a("./tracking/constant.js"),D=a("./site-modules/shared/utils/appraisal-link-constructor.js"),M=a("./site-modules/shared/components/form-validation/validation.js"),F=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx");class Y extends p.PureComponent{render(){const e=this.props,t=e.isFullWidth,a=e.children;return t?b.a.createElement("div",null,a):b.a.createElement(f.a,null,b.a.createElement(N.a,{xs:12,md:9},a))}}Y.propTypes={children:E.a.oneOfType([E.a.arrayOf(E.a.node),E.a.node]).isRequired,isFullWidth:E.a.bool},Y.defaultProps={isFullWidth:!1};var B=a("./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/epo-tab-content-form-wrapper.jsx"),$=a("./site-modules/shared/components/field-error/field-error.jsx"),q=a("./site-modules/shared/components/styled-select/styled-select.jsx"),H=a("./site-modules/shared/components/spinner/spinner.jsx"),W=a("./data/models/vehicle-vin.js"),G=a("./site-modules/shared/constants/appraisal/appraisal.js"),z=a("./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/let-us-know-wufoo.jsx"),K=a("./utils/seed-randomizers.js"),Q=a("./site-modules/shared/utils/appraisal/check-vin-inventory.js");a("./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.scss");a.d(t,"a",function(){return te});const J={licensePlate:{INVALID:"Please enter a valid license plate",LANDING_INVALID:e=>b.a.createElement(p.Fragment,null,"We could not find that license plate. If your license plate is a special plate (vanity, disabled person, special interest, etc.), please use your ",e," instead."),INVALID_WITH_WUFOO:e=>b.a.createElement(p.Fragment,null,"We could not find that license plate. If your license plate is a special plate (vanity, disabled person, special interest, etc.), please use your ",e," instead. ",b.a.createElement(z.a,null)),ERROR:"We're sorry, we could not look up your license plate at this time.",NO_STYLES:"We're sorry. We were unable to locate your license plate. Please try entering a VIN or a Make, Model, Year instead."},stateCode:{INVALID:"Please select a state"}},Z=9,X={action_name:U.b.ACTION_APPRAISE_VEHICLE,action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_BUTTON_CLICK},ee={LICENSE_PLATE:{VIN_BY_ADDRESS_OVERLAY:{xs:12},APPRAISAL_VALUE:{xs:12,md:6},DEFAULT:{xs:12,md:5,lg:6,xl:5},VDP_EMBEDDED:{xs:12,md:6},ESCAPE_HATCH:{xs:7},DRAWER_TYPE:{xs:12,md:6}},STATE_CODE:{VIN_BY_ADDRESS_OVERLAY:{xs:12},APPRAISAL_VALUE:{xs:12,md:4,xl:5},DEFAULT:{xs:12,md:4,lg:6,xl:5},VDP_EMBEDDED:{xs:12,md:6},ESCAPE_HATCH:{xs:5},DRAWER_TYPE:{xs:12,md:6}}};class te extends p.Component{constructor(){var e;e=super(...arguments),this.state={vinFromLicensePlate:this.props.vinFromLicensePlate,licensePlate:this.props.licensePlate,stateCode:this.props.initialStateCode,isSubmitting:!1,isSubmitted:!1,errorMap:new Map,styleIds:[],isVisibleAppraisalBtn:!0},this.onLicensePlateChange=(e=>{let t=e.target.value;return this.setStateValueAndClearError("licensePlate",t)}),this.onStateCodeChange=function(){let t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).stateCode;return t&&e.setStateValueAndClearError("stateCode",t)},this.setSquishVinError=(()=>this.setState(e=>{let t=e.errorMap;return t.set("licensePlateWide",J.licensePlate.NO_STYLES),t.delete("licensePlate"),{isSubmitting:!1,errorMap:t}},this.props.onValidationError)),this.setStateValueAndClearError=((e,t)=>{const a=this.props.onValueChange;this.setState(a=>{let s=a.errorMap;return s.has(e)&&s.delete(e),{[e]:t,errorMap:s,isSubmitted:!1}},a)}),this.getAppraisalButton=(()=>{const e=this.props,t=e.ctaText,a=e.isLookUpStyleView,s=this.state.isSubmitting;return b.a.createElement("div",{className:y()({"mt-0_5":a})},b.a.createElement(V.a,{color:"success",className:"text-transform-none btn-responsive-sm-down py-0_5",onClick:this.handleSubmit,disabled:s,"data-test":"submit-license-plate-btn"},s&&b.a.createElement("span",{className:"pr-0_5"},b.a.createElement(H.a,{size:14,thickness:1,color:"white"})),b.a.createElement("span",{className:"size-16"},t)))}),this.uniqInputId="",this.resetIsSubmitting=(()=>this.setState({isSubmitting:!1})),this.resetIsSubmitted=(e=>this.setState({isSubmitted:!1},e)),this.handleVinTabChange=(e=>{const t=this.props.setVinTabActive;e.preventDefault(),t&&t()}),this.handleSubmit=(async e=>{e.preventDefault();const t=this.props.setModelValue;await t("licensePlateError",L.b),await this.props.clearVin(),this.setState({isSubmitted:!0},()=>this.toggleSubmit(this.validateAndSubmit))}),this.validate=(()=>{const e=this.state,t=e.licensePlate,a=e.stateCode,s=M.a.validateLicensePlate(t),n=M.a.validateValue(a);return this.setState(e=>{let t=e.errorMap;return s?(t.delete("licensePlate"),t.delete("licensePlateWide")):(t.set("licensePlate",J.licensePlate.INVALID),t.delete("licensePlateWide")),n?t.delete("stateCode"):t.set("stateCode",J.stateCode.INVALID),{errorMap:t}}),n&&s}),this.toggleSubmit=(e=>this.setState(e=>({isSubmitting:!e.isSubmitting}),e)),this.validateAndSubmit=(async()=>{const e=this.props,t=e.setVin,a=e.creativeId,s=e.onValidationError,i=e.ctaText,l=e.isAppraisalValuePage,d=e.vinTabLink,c=e.isStylesFromUniversalVinEnabled,m=e.setLicensePlateAndStateCode,u=e.licensePlateLookupError,p=e.setStylesAndVin,b=this.state,h=b.licensePlate,E=b.stateCode,_=b.vinFromLicensePlate,y=b.isSubmitted,g=o()(_,"vin",null);if(this.validate())if(!y||g){if(R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.SUBMIT_LICENSE_PLATE,creative_id:a,value:i})}),R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_START,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE,creative_id:a,value:h})}),R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_START,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_STATE,creative_id:a,value:E})}),g&&!u){let e,s;R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_LOOKUP,creative_id:a,value:U.b.VIN_FOUND})}),Object(Q.a)(g,G.e,r.a);let i=[];if(c)p((i=await Object(W.e)(g)).map(e=>o()(e,"vehicleInfo.styleInfo",{})).map(e=>({makeName:e.make,makeNiceId:e.makeNiceId,modelName:e.model,modelNiceId:e.modelNiceId,year:e.year,styleId:parseInt(e.styleId,10),styleName:e.style})),g,h),e=i.length>1?null:o()(i,"[0].vehicleInfo.vehicleColors.exterior.id",""),s=i.map(e=>o()(e,"vehicleInfo.styleInfo.styleId","")),R.a.fireTrackAction(Object(G.nb)(s,a));else{const e=await Object(W.f)(g);p(e,g,h),s=e.map(e=>{return e.styleId})}return this.setState({styleIds:s,colorId:e}),void t(g)}this.setState(e=>{let t=e.errorMap;return null===g||u?(t.set("licensePlate",J.licensePlate.ERROR),t.delete("licensePlateWide")):l?(t.set("licensePlateWide",J.licensePlate.INVALID_WITH_WUFOO(d)),t.delete("licensePlate")):(t.set("licensePlateWide",J.licensePlate.LANDING_INVALID(d)),t.delete("licensePlate")),{isSubmitting:!1,errorMap:t}},s),R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_LOOKUP,creative_id:a,value:u?U.b.LOOKUP_ERROR:U.b.VIN_NOT_FOUND})})}else m({licensePlate:h,stateCode:E});else this.toggleSubmit(s)})}componentDidMount(){this.props.useUniqId&&(this.uniqInputId=Object(K.c)());const e=o()(this.props,"vinFromLicensePlate.service");e&&R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.LICENSE_PLATE_LOOKUP_SERVICE,creative_id:this.props.creativeId,value:e})})}componentDidUpdate(e){const t=this.props,a=t.vinFromLicensePlate,s=t.squishStyles,i=t.isAppraisalValuePage,l=t.vinEligibility,r=t.onCompleteCallback,d=t.creativeId,m=t.isVdpEmbedded,p=t.licensePlateLookupError,b=t.isLookUpStyleView,h=t.isAppExtensionPage,E=o()(a,"vin",null),_=o()(a,"service"),y=o()(e.vinFromLicensePlate,"vin",null),g=o()(e.vinFromLicensePlate,"service"),S=this.state,v=S.isSubmitting,f=S.isSubmitted,C=S.colorId,N=!u()(s,e.squishStyles),T=!u()(l,e.vinEligibility);if(!E||!_||u()(E,y)&&u()(_,g)||R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.LICENSE_PLATE_LOOKUP_SERVICE,creative_id:this.props.creativeId,value:_})}),N&&!c()(s)){const e=s[0],t=e.makeNiceId,a=e.modelNiceId,i=e.year;R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.SUBACTION_VIN_ENTRY,creative_id:d,value:E})});const o=Object(D.b)({make:t,model:a,year:i,queryParams:{vin:E,styleIds:this.state.styleIds.join(","),colorId:C},isAppExtensionPage:h});m?(window.open(o,"_blank"),v&&this.resetIsSubmitting()):b||w.b.push(o)}N&&c()(s)&&(R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_USER_INPUT,action_name:U.b.ACTION_APPRAISE_VEHICLE,creative_id:d,subaction_name:U.b.SUBACTION_SQUISHVIN_DECODE,value:U.b.MMY_NOT_FOUND}}),R.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_USER_INPUT,action_name:U.b.ACTION_APPRAISE_VEHICLE,creative_id:d,subaction_name:U.b.SUBACTION_VIN_ERROR,value:`${E}_${U.b.SUBACTION_SQUISHVIN_DECODE}_${U.b.MMY_NOT_FOUND}`}}),this.setSquishVinError()),f&&(E!==y||p)&&this.resetIsSubmitted(async()=>{await this.validateAndSubmit()}),i&&T&&!c()(l)&&v&&this.toggleSubmit(r(E,l))}static getDerivedStateFromProps(e,t){const a=e.vinFromLicensePlate;return u()(a,t.vinFromLicensePlate)?{}:{vinFromLicensePlate:a}}render(){const e=this.props,t=e.stateCodes,a=e.isMobile,n=e.ctaText,i=e.isAppraisalValuePage,o=e.tabContentModal,l=e.isSecondary,r=e.isVdpEmbedded,d=e.squishVinError,c=e.isEscapeHatch,m=e.isFullWidth,u=e.isLookUpStyleView,h=e.isEscapeHatchDrawer,E=e.isLocationStyleStep,_=e.hideVinLicensePlateBtn,g=e.isEval3463Chal1Enabled,v=e.isEval3622Chal1Enabled,C=e.isVinByAddressOverlay,T=this.state,I=T.isSubmitting,j=T.errorMap,k=T.licensePlate,x=T.stateCode,L=g||v,w=j.has("licensePlate"),R=j.has("licensePlateWide"),U=j.has("stateCode"),D=!I&&!(w||U||R)&&d;let M,W,G;C?(M=F.a,W=ee.LICENSE_PLATE.VIN_BY_ADDRESS_OVERLAY,G=ee.STATE_CODE.VIN_BY_ADDRESS_OVERLAY):r?(M=Y,W=ee.LICENSE_PLATE.VDP_EMBEDDED,G=ee.STATE_CODE.VDP_EMBEDDED):!i||h||E?u||h||E?(M=F.a,W=ee.LICENSE_PLATE.DRAWER_TYPE,G=ee.STATE_CODE.DRAWER_TYPE):(M=F.a,W=ee.LICENSE_PLATE.DEFAULT,G=ee.STATE_CODE.DEFAULT):(M=B.a,W=ee.LICENSE_PLATE.APPRAISAL_VALUE,G=ee.STATE_CODE.APPRAISAL_VALUE,c&&(W=ee.LICENSE_PLATE.ESCAPE_HATCH,G=ee.STATE_CODE.ESCAPE_HATCH));const z=`license-plate${this.uniqInputId}`,K=`state-code${this.uniqInputId}`;let Q=h?7:6;Q=E?4:Q;const J=!E||a||C,X=(!i||E)&&!C;return b.a.createElement(M,{isFullWidth:m||E||C,isEscapeHatch:c},b.a.createElement(S.a,{onSubmit:this.handleSubmit},b.a.createElement(f.a,{className:y()("appraise-by-license-plate-tab",{"mt-2":h})},b.a.createElement(N.a,Object(s.a)({},W,{className:y()({"px-0":E})}),b.a.createElement(A.a,{className:y()("styled-input",{"has-danger":w,"pr-md-0_75 pr-lg-1":E,"text-left":C})},b.a.createElement(P.a,{className:y()({"font-weight-bold":i&&!c&&!E,"size-12":X,"size-14 text-gray-darker":c,"size-16 text-left font-weight-bold":C}),for:z},"License Plate"),b.a.createElement(O.a,{className:y()("license-plate-input",{"size-16":J,"size-14":!J}),id:z,value:k,onChange:this.onLicensePlateChange,placeholder:c?"":"Enter License Plate",maxLength:Z}),b.a.createElement($.a,{id:`${z}-error`,error:j.get("licensePlate"),classes:"mt-0_5"}))),b.a.createElement(N.a,Object(s.a)({},G,{className:y()({"px-0":E})}),b.a.createElement(A.a,{className:y()({"has-danger":U,"pl-md-0_75 pl-lg-1":E,"text-left":C})},b.a.createElement(q.a,{id:K,name:"state-code",labelText:"State",labelClassName:y()({"font-weight-bold":i&&!c&&!E,"size-12":X,"size-14 text-gray-darker":c,"size-16 text-left font-weight-bold":C}),className:y()({"text-gray-dark":c,"size-16":J,"size-14":!J}),toggle:"Select State",labelKey:"stateCode",valueKey:"stateCode",options:t,value:x,onChange:this.onStateCodeChange}),b.a.createElement($.a,{id:`${K}-error`,error:j.get("stateCode"),classes:"mt-0_5"}))),b.a.createElement(N.a,{xs:12,className:y()({"px-0":E})},b.a.createElement($.a,{id:`license-plate-landing-input${this.uniqInputId}-error`,error:j.get("licensePlateWide"),classes:"mb-1"}))),b.a.createElement("div",{className:y()({"mb-2":C,"pt-1":C&&!d})},i||E||C?b.a.createElement(p.Fragment,null,!a&&D&&b.a.createElement(f.a,null,b.a.createElement(N.a,{xs:12,className:y()({"px-0":E})},b.a.createElement($.a,{id:"vin-errors",error:d,classes:"mb-1"}))),(!_||C)&&b.a.createElement(f.a,{className:y()("align-items-center",{"mt-0_5":c||E||h})},b.a.createElement(N.a,{xs:12,md:c||C?12:Q,className:y()({"px-0":E})},b.a.createElement(V.a,{color:h&&!L?"primary-b":"success",block:!0,className:y()("epo-license-plate-continue-btn text-transform-none",{"py-1":c&&!C,"py-0_5":!c&&!C}),onClick:this.handleSubmit,disabled:I,"data-tracking-id":"epo_submit_license_plate","data-test":"submit-license-plate-btn","data-tracking-value":l?`${n} 2`:n},I&&b.a.createElement("span",{className:"pr-0_5"},b.a.createElement(H.a,{size:14,thickness:1,color:"white"})),b.a.createElement("span",{className:"size-16"},n)),a&&D&&b.a.createElement($.a,{id:"vin-errors",error:d,classes:"mt-0_5"})),o&&b.a.createElement(N.a,{xs:12,md:c?12:6,className:y()("mt-1 text-center",{"text-md-left mt-md-0":!c})},o))):this.getAppraisalButton())))}}te.propTypes={setModelValue:E.a.func.isRequired,setVin:E.a.func.isRequired,clearVin:E.a.func.isRequired,squishStyles:E.a.arrayOf(E.a.shape({id:E.a.number,year:E.a.number,makeName:E.a.string,makeNiceId:E.a.string,modelName:E.a.string,modelNiceId:E.a.string})),stateCodes:x.a.States,licensePlate:E.a.string,stateCode:E.a.string,isMobile:E.a.bool,isSecondary:E.a.bool,ctaText:E.a.string,creativeId:E.a.string,isEscapeHatch:E.a.bool,useUniqId:E.a.bool,onCompleteCallback:E.a.func,onValidationError:E.a.func,vinEligibility:L.a.VinEligibility,vinFromLicensePlate:E.a.shape({vin:E.a.string,service:E.a.string}),licensePlateLookupError:E.a.bool,isAppraisalValuePage:E.a.bool,isVdpEmbedded:E.a.bool,tabContentModal:E.a.oneOfType([E.a.node,E.a.func]),squishVinError:E.a.oneOfType([E.a.string,E.a.node,E.a.func]),setVinTabActive:E.a.func,setLicensePlateAndStateCode:E.a.func,onValueChange:E.a.func,setStylesAndVin:E.a.func,initialStateCode:E.a.string,vinTabLink:E.a.oneOfType([E.a.node,E.a.func]),isStylesFromUniversalVinEnabled:E.a.bool,isLookUpStyleView:E.a.bool,isEscapeHatchDrawer:E.a.bool,isLocationStyleStep:E.a.bool,isFullWidth:E.a.bool,hideVinLicensePlateBtn:E.a.bool,isAppExtensionPage:E.a.bool,isEval3463Chal1Enabled:E.a.bool,isEval3622Chal1Enabled:E.a.bool,isVinByAddressOverlay:E.a.bool},te.defaultProps={squishStyles:null,stateCodes:[],licensePlate:"",stateCode:"",isMobile:!1,isAppraisalValuePage:!1,isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,isSecondary:!1,ctaText:"Continue",creativeId:G.e,isEscapeHatch:!1,useUniqId:!0,onCompleteCallback:r.a,onValidationError:r.a,setStylesAndVin:r.a,vinEligibility:null,vinFromLicensePlate:{},licensePlateLookupError:!1,tabContentModal:null,squishVinError:null,setVinTabActive:null,setLicensePlateAndStateCode:r.a,onValueChange:r.a,initialStateCode:"",vinTabLink:null,isLookUpStyleView:!1,isEscapeHatchDrawer:!1,isLocationStyleStep:!1,isFullWidth:!1,hideVinLicensePlateBtn:!1,isAppExtensionPage:!1,isEval3463Chal1Enabled:!1,isEval3622Chal1Enabled:!1,isVinByAddressOverlay:!1}},"./site-modules/shared/components/appraisal/appraisal-utm-storage/appraisal-utm-storage.js":function(e,t,a){"use strict";a.d(t,"a",function(){return m});a("../node_modules/core-js/modules/es6.regexp.constructor.js");var s=a("../node_modules/lodash/flatten.js"),n=a.n(s),i=a("./utils/location.js"),o=a("./site-modules/shared/utils/storage.js");const l="appraisals",r="appraisal",d="eval",c="facebook",m={get isSemCampaignAppraisals(){return this.getSessionStorage().get("sem_campaign_appraisals")||!1},get isSemCampaignFacebook(){return this.getSessionStorage().get("sem_campaign_facebook")||!1},getSessionStorage(){return this.sessionStorage||(this.sessionStorage=new o.a("sessionStorage")),this.sessionStorage},checkAndSetSemCampaignAppraisals(e){this.isUtmAccountQueryParamAppraisals(e)&&this.getSessionStorage().set("sem_campaign_appraisals",!0)},checkAndSetSemCampaignFacebook(e){this.isUtmSourceQueryParamFacebook(e)&&this.getSessionStorage().set("sem_campaign_facebook",!0)},isUtmAccountQueryParamAppraisals(e){try{const t=Object(i.a)(e).utm_account;return n()([t]).some(e=>e&&(l===e.toLowerCase()||r===e.toLowerCase()))}catch(e){return console.error("Error in isUtmAccountQueryParamAppraisals:",e.message),!1}},isUtmSourceQueryParamFacebook(e){try{const t=Object(i.a)(e),a=t.utm_account,s=t.utm_source,o=n()([a]).some(e=>new RegExp(`\\b${d}(_.*)?`,"i").test(e)),l=n()([s]).some(e=>e&&c===e.toLowerCase());return o&&l}catch(e){return console.error("Error in isUtmSourceQueryParamFacebook:",e.message),!1}}}},"./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/epo-tab-content-form-wrapper.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return p});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Row.js"),c=a.n(d),m=a("../node_modules/reactstrap/lib/Col.js"),u=a.n(m);class p extends s.PureComponent{render(){const e=this.props,t=e.children,a=e.isEscapeHatch,s=e.isEscapeHatchDrawer,i=e.isLocationStyleStep,o=a||s||i?12:8;return n.a.createElement(c.a,null,n.a.createElement(u.a,{xs:12,xl:o,className:r()({"px-0":i})},t))}}p.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,isEscapeHatch:o.a.bool,isEscapeHatchDrawer:o.a.bool,isLocationStyleStep:o.a.bool},p.defaultProps={isEscapeHatch:!1,isEscapeHatchDrawer:!1,isLocationStyleStep:!1}},"./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/let-us-know-wufoo.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var s=a("../node_modules/react/index.js"),n=a.n(s);const i="https://tier3.wufoo.com/forms/carmax-instant-offer-on-edmunds/";function o(){return n.a.createElement("span",null,"Think there is something wrong? Let us know"," ",n.a.createElement("a",{href:i,rel:"nofollow noopener noreferrer",target:"_blank",className:"text-primary-darker text-decoration-underline"},"here."))}},"./site-modules/shared/components/field-error/field-error.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return d});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l);function d(e){let t=e.error,a=e.classes,s=e.id;return t?n.a.createElement("div",{id:s,className:r()("text-danger small",a)},t):null}d.propTypes={error:o.a.oneOfType([o.a.string,o.a.node,o.a.func]),classes:o.a.string,id:o.a.string.isRequired},d.defaultProps={error:null,classes:""}},"./site-modules/shared/components/find-vin-modal/find-vin-modal.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return h});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/reactstrap/lib/Button.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Modal.js"),c=a.n(d),m=a("./utils/event-toolbox.js"),u=a("./tracking/constant.js"),p=a("./images/vin-masked-asset.svg"),b=a.n(p);a("./site-modules/shared/components/find-vin-modal/find-vin-modal.scss");class h extends s.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.trackModalToggle=(()=>{const e=this.props.creativeId,t=this.state.isOpen;m.a.fireTrackAction({event_type:u.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:u.b.ACTION_SHOW_CONTENT,action_category:u.b.SYSTEM_ACTION_CATEGORY,action_cause:u.b.ACTION_CAUSE_LINK_CLICK,subaction_name:t?u.b.FIND_VIN:u.b.CLOSE_POPUP,creative_id:e,value:t?"open":"close"}})}),this.toggleModal=(()=>this.setState(e=>({isOpen:!e.isOpen}),this.trackModalToggle))}render(){const e=this.props,t=e.className,a=e.isInfoIcon;return n.a.createElement(s.Fragment,null,n.a.createElement(r.a,{color:"link",className:t,onClick:this.toggleModal},n.a.createElement("span",{className:"font-weight-normal"},a?n.a.createElement("i",{className:"text-gray icon icon-info size-12"}):"Where can I find my VIN?")),n.a.createElement(c.a,{modalClassName:"p-1 p-md-2 p-lg-3",className:"find-vin-modal my-0 mx-auto",isOpen:this.state.isOpen,toggle:this.toggleModal},n.a.createElement("header",{className:"px-2 my-1 find-vin-modal-header"},n.a.createElement("h4",{className:"size_20 text-gray-darker"},"Where can I find my VIN?"),n.a.createElement(r.a,{color:"link",size:"lg",className:"close-btn p-0_25","aria-label":"Close",onClick:this.toggleModal},n.a.createElement("i",{className:"icon-cross2 size-16"}))),n.a.createElement("div",{className:"px-2 pb-1 text-gray-darker"},n.a.createElement("p",{className:"size-14"},"There are two easy ways of finding your VIN. Your VIN consists of 17 digits and capital letters."),n.a.createElement("img",{src:b.a,className:"my-1 img-fluid",alt:"Where can I find my VIN?"}),n.a.createElement("p",{className:"m-0 size-14"},"Other locations to find your VIN are:"),n.a.createElement("ul",{className:"size-14 pl-1"},n.a.createElement("li",null,"Insurance card/insurance policy"),n.a.createElement("li",null,"Vehicle title and registration")))))}}h.propTypes={creativeId:o.a.string.isRequired,className:o.a.string,isInfoIcon:o.a.bool},h.defaultProps={className:"p-0 border-0 text-primary-darker text-transform-none size-16 find-vin-modal-open-btn",isInfoIcon:!1}},"./site-modules/shared/components/validation/validation-helper/validation-helper.js":function(e,t,a){"use strict";a.d(t,"a",function(){return i});a("../node_modules/core-js/modules/es6.regexp.replace.js");var s=a("./site-modules/shared/components/form-validation/validation.js"),n=a("./site-modules/shared/components/form-validation/validation-async.js");const i={validatePhoneNumber:async(e,t)=>{const a=e.fieldValue.replace(/\D/g,""),i=!a.length||s.b.RE_PHONE_HAS_TEN_DIGITS.test(a)&&!s.b.RE_PHONE_SEVEN_SAME_LAST_DIGITS.test(a)&&!s.b.RE_PHONE_STARTS_WITH_01.test(a)&&!s.b.RE_PHONE_WRONG_AREA_CODE.test(a)&&!s.b.RE_PHONE_WRONG_PREFIX.test(a);return i&&e.isAsync?(async(e,t,a)=>(await n.a.fetchPhoneValidation({phone:e,id:t},a)).isPhoneValid)(a,e.id,t):i},validateZipCode:e=>!e.fieldValue.length||s.b.RE_ZIP_HAS_FIVE_DIGITS.test(e.fieldValue),shouldMatchAndNotEmpty:e=>{const t=e.fieldValue,a=e.minLength,s=!0===e.reverseFlag?t!==a:t===a;return!!t.length&&s},validateStreet:e=>{if(!e.fieldValue)return!1;const t=e.fieldValue.trim();return s.a.validateMinLength(t,e.minLength)&&s.b.RE_ADDRESS_HAS_NO_WRONG_CHARACTERS.test(t)&&!s.b.RE_NAME_SEVEN_CONSONANTS_CONSEQUENTLY.test(t)&&s.b.RE_PHONE_STARTS_WITH_DIGIT.test(t)&&!s.b.RE_NAME_THREE_SAME_CHARACTERS_CONSEQUENTLY.test(t)},validateCity:e=>{if(!e.fieldValue)return!1;const t=e.fieldValue.trim();return s.a.validateMinLength(t,e.minLength)&&s.b.RE_ADDRESS_HAS_NO_WRONG_CHARACTERS.test(t)&&!s.b.RE_NAME_SEVEN_CONSONANTS_CONSEQUENTLY.test(t)&&!s.b.RE_NAME_THREE_SAME_CHARACTERS_CONSEQUENTLY.test(t)},validateName:function(e){const t=e.fieldValue;if(!t)return!1;const a=t.trim();return s.a.validateMinLength(a,e.minLength)&&s.a.validateName(a)},validateFieldLength:function(e){return s.a.validateMinLength(e.fieldValue,e.minLength)}}},"./site-modules/shared/components/vehicle-dropdowns/constants.js":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return n});const s="mmy-select w-100 btn btn-sm btn-secondary",n={name:"All makes",slug:"all"}},"./site-modules/shared/components/vehicle-dropdowns/make-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return m}),a.d(t,"b",function(){return p});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("./data/luckdragon/redux/react-binding.jsx"),i=a("./data/models/vehicle.js"),o=a("./site-modules/shared/components/select/select.jsx"),l=a("./site-modules/shared/components/styled-select/styled-select.jsx"),r=a("./site-modules/shared/utils/publication-states.js"),d=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const c={options:Object(n.a)("makesList",i.c,(e,t)=>{let a=t.pubStates,s=t.includeAllMakes,n=t.valueKey,i=t.labelKey;return s?[{[n]:d.a.slug,[i]:d.a.name},...Object(r.a)(e,a)]:Object(r.a)(e,a)})},m=Object(n.b)(o.a,c),u={labelText:"Make",isLabelHidden:!0,name:"select-make",toggle:"Select Make",valueKey:"slug",labelKey:"name",includeAllMakes:!1},p=Object(n.b)(l.a,c);p.defaultProps=Object(s.a)({},u),m.defaultProps=Object(s.a)({},u,{className:`js-makes-select ${d.b}`})},"./site-modules/shared/components/vehicle-dropdowns/model-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return g}),a.d(t,"b",function(){return S});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/lodash/mapValues.js"),i=a.n(n),o=a("../node_modules/lodash/groupBy.js"),l=a.n(o),r=a("../node_modules/lodash/toArray.js"),d=a.n(r),c=a("./data/luckdragon/redux/react-binding.jsx"),m=a("./data/models/vehicle.js"),u=a("./site-modules/shared/components/select/select.jsx"),p=a("./site-modules/shared/components/styled-select/styled-select.jsx"),b=a("./site-modules/shared/utils/sorting.js"),h=a("./site-modules/shared/utils/publication-states.js"),E=a("./constants/pub-states.js"),_=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const y={options:Object(c.a)(e=>{const t=e.make;return t&&`makes["${t.slug}"].models`},m.c,(e,t)=>Object(h.a)(d()(e),t.pubStates).sort(b.a)),optionsGrouped:Object(c.a)(e=>{const t=e.make;return e.pubStates.includes(E.a.USED)&&t&&`makes["${t.slug}"].models`},m.c,(e,t)=>{const a=Object(h.a)(d()(e),t.pubStates),s=l()(a,e=>{let t=e.pubStates;return t[E.a.NEW]||t[E.a.NEW_USED]?"popular":"other"});if(Object.keys(s).length<2)return{};const n=i()(s,e=>e.sort(b.a));return{"Popular Models":n.popular,"Other Models":n.other}})},g=Object(c.b)(u.a,y),S=Object(c.b)(p.a,y),v={labelText:"Model",isLabelHidden:!0,name:"select-model",toggle:"Select Model",valueKey:"name",labelKey:"name"};g.defaultProps=Object(s.a)({},v,{className:`js-models-select ${_.b}`}),S.defaultProps=Object(s.a)({},v)},"./site-modules/shared/components/vehicle-dropdowns/year-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"b",function(){return E}),a.d(t,"a",function(){return y});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/lodash/toArray.js"),i=a.n(n),o=a("./data/luckdragon/redux/react-binding.jsx"),l=a("./data/models/vehicle.js"),r=a("./constants/pub-states.js"),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./site-modules/shared/utils/sorting.js"),u=a("./site-modules/shared/utils/date-utils.js"),p=a("./site-modules/shared/utils/publication-states.js"),b=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const h={options:Object(o.a)(e=>{const t=e.make,a=e.model;return t&&a&&Object(l.k)({make:t.slug,model:a.slug})},l.c,function(e,t){let a=t.pubStates,n=t.showLatestYears,o=t.splitNewUsed,l=t.earliestYear,d=t.includeNextYear,c=void 0===d||d,b=t.additionalOptions,h=Object(p.a)(i()(e),a).sort(m.c);if(n){const e=Object(u.g)();return h.filter(t=>{let a=t.year;return e.includes(Number(a))})}if(o){const e=[];return h.forEach(t=>t.pubStates.NEW_USED?e.push(Object(s.a)({},t,{displayPubState:r.a.NEW,label:`${t.year} - New`}),Object(s.a)({},t,{displayPubState:r.a.USED,label:`${t.year} - Used`})):e.push(Object(s.a)({},t,{label:t.year}))),e}if(l&&(h=h.filter(e=>e.year>=l)),!c){const e=Object(u.c)().getFullYear()+1;h=h.filter(t=>t.year<e)}return[...h,...b||[]]})},E=Object(o.b)(d.a,h),_={name:"select-year",toggle:"Select Year",valueKey:"year",labelKey:"year"},y=Object(o.b)(c.a,h);y.defaultProps=Object(s.a)({},_),E.defaultProps=Object(s.a)({},_,{className:`js-years-select ${b.b}`})},"./site-modules/shared/components/ymms-dropdowns/make-dropdown/make-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return h});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("../node_modules/react/index.js"),o=a.n(i),l=a("../node_modules/prop-types/index.js"),r=a.n(l),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./data/luckdragon/redux/react-binding.jsx"),u=a("./data/models/vehicle.js");const p={options:Object(m.a)(e=>{let t=e.year,a=e.pubStates;return t&&Object(u.G)(t,a)},u.c)};function b(e){let t=e.isStyled,a=Object(n.a)(e,["isStyled"]);const s=t?c.a:d.a;return o.a.createElement(s,a)}b.propTypes=Object(s.a)({},d.c,{isStyled:r.a.bool}),b.defaultProps=Object(s.a)({},d.b,{isStyled:!1});const h=Object(m.b)(b,p)},"./site-modules/shared/components/ymms-dropdowns/model-dropdown/model-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return h});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("../node_modules/react/index.js"),o=a.n(i),l=a("../node_modules/prop-types/index.js"),r=a.n(l),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./data/luckdragon/redux/react-binding.jsx"),u=a("./data/models/vehicle.js");const p={options:Object(m.a)(e=>{let t=e.make,a=e.year,s=e.pubStates;return t&&a&&Object(u.l)(t,a,s)},u.c)};function b(e){let t=e.isStyled,a=Object(n.a)(e,["isStyled"]);const s=t?c.a:d.a;return o.a.createElement(s,a)}b.propTypes=Object(s.a)({},d.c,{isStyled:r.a.bool}),b.defaultProps=Object(s.a)({},d.b,{isStyled:!1});const h=Object(m.b)(b,p)},"./site-modules/shared/components/ymms-dropdowns/year-dropdown/year-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return _});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),i=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=a("../node_modules/react/index.js"),l=a.n(o),r=a("../node_modules/prop-types/index.js"),d=a.n(r),c=a("./data/luckdragon/redux/react-binding.jsx"),m=a("./data/models/vehicle.js"),u=a("./constants/pub-states.js"),p=a("./site-modules/shared/components/select/select.jsx"),b=a("./site-modules/shared/components/styled-select/styled-select.jsx");function h(e){let t=e.isStyled,a=e.years,s=Object(i.a)(e,["isStyled","years"]);const o=t?b.a:p.a;return l.a.createElement(o,Object(n.a)({},s,{name:"select-year",options:a}))}h.propTypes=Object(s.a)({},p.c,{isStyled:d.a.bool,years:d.a.arrayOf(d.a.shape({year:d.a.number}))}),h.defaultProps=Object(s.a)({},p.b,{isStyled:!1,years:[]});const E={years:Object(c.a)(e=>{let t=e.pubStates;return Object(m.x)(t)},m.c)},_=Object(c.b)(h,E);_.propTypes=Object(s.a)({},p.c,{isStyled:d.a.bool,years:d.a.arrayOf(d.a.shape({year:d.a.number})),pubStates:d.a.arrayOf(d.a.string)}),_.defaultProps=Object(s.a)({},p.b,{isStyled:!1,years:[],pubStates:[u.a.NEW,u.a.NEW_USED,u.a.USED]})},"./site-modules/shared/components/ymms-dropdowns/ymms-dropdowns.jsx":function(e,t,a){"use strict";var s=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),n=(a("../node_modules/core-js/modules/es6.regexp.to-string.js"),a("../node_modules/react/index.js")),i=a.n(n),o=a("../node_modules/prop-types/index.js"),l=a.n(o),r=a("../node_modules/reactstrap/lib/Form.js"),d=a.n(r),c=a("../node_modules/reactstrap/lib/FormGroup.js"),m=a.n(c),u=a("../node_modules/reactstrap/lib/Row.js"),p=a.n(u),b=a("../node_modules/reactstrap/lib/Col.js"),h=a.n(b),E=a("./site-modules/shared/components/field-error/field-error.jsx"),_=a("./constants/pub-states.js"),y=a("./site-modules/shared/components/ymms-dropdowns/make-dropdown/make-dropdown.jsx"),g=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),S=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),v=a("../node_modules/lodash/get.js"),f=a.n(v),C=a("./site-modules/shared/components/select/select.jsx"),N=a("./site-modules/shared/components/styled-select/styled-select.jsx"),T=a("./data/luckdragon/redux/react-binding.jsx"),O=a("./data/models/vehicle.js");const I={options:Object(T.a)(e=>{let t=e.make,a=e.model,s=e.submodel,n=e.year;return e.withoutSubmodel?!!(t&&a&&n)&&Object(O.y)({make:t,model:a,year:n}):!!(n&&t&&a&&f()(s,"niceId"))&&Object(O.y)({year:n,make:t,model:a,submodel:s.niceId})},O.c,e=>e.filter(e=>{return e.publicationState!==_.a.PRE_PROD}))};function A(e){let t=e.isStyled,a=Object(S.a)(e,["isStyled"]);const s=t?N.a:C.a;return i.a.createElement(s,a)}A.propTypes=Object(g.a)({},C.c,{isStyled:l.a.bool}),A.defaultProps=Object(g.a)({},C.b,{isStyled:!1});const j=Object(T.b)(A,I);var P=a("./site-modules/shared/components/ymms-dropdowns/model-dropdown/model-dropdown.jsx"),k=a("./site-modules/shared/utils/publication-states.js");const V={options:Object(T.a)(e=>{let t=e.make,a=e.year;return t&&a&&Object(O.m)({make:t,year:a})},O.c,e=>Object(k.a)(e,[_.a.NEW_USED,_.a.USED,_.a.NEW]).sort((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))};function x(e){let t=e.isStyled,a=Object(S.a)(e,["isStyled"]);const s=t?N.a:C.a;return i.a.createElement(s,a)}x.propTypes=Object(g.a)({},C.c,{isStyled:l.a.bool}),x.defaultProps=Object(g.a)({},C.b,{isStyled:!1});const L=Object(T.b)(x,V);var w=a("./site-modules/shared/components/ymms-dropdowns/year-dropdown/year-dropdown.jsx");const R={options:Object(T.a)(e=>{let t=e.make,a=e.model,s=e.submodel,n=e.year;return e.withoutSubmodel?!!(t&&a&&n)&&Object(O.w)({make:t,model:a,year:n}):!!(n&&t&&a&&f()(s,"niceId"))&&Object(O.w)({year:n,make:t,model:a,submodel:s.niceId})},O.c,e=>e.filter(e=>{return e.publicationState!==_.a.PRE_PROD}))};function U(e){let t=e.isStyled,a=e.options,n=e.labelKey,o=(e.mostPopularStyleId,Object(S.a)(e,["isStyled","options","labelKey","mostPopularStyleId"]));const l=t?N.a:C.a,r=a.length>1?function(e,t){const a=[...e],s=a[0];return s[t]=`${s[t]} (Most Popular)`,a}(a,n):a;return i.a.createElement(l,Object(s.a)({options:r,labelKey:n},o))}U.propTypes=Object(g.a)({},C.c,{isStyled:l.a.bool}),U.defaultProps=Object(g.a)({},C.b,{isStyled:!1});const D=Object(T.b)(U,R);a.d(t,"a",function(){return F});const M={Col:{PropTypes:l.a.shape({xs:l.a.number,md:l.a.number,lg:l.a.number,xl:l.a.number}),DefaultProps:{xs:12,md:null,lg:null,xl:null}}};class F extends n.Component{constructor(e){super(e),this.onChange=(()=>{const e=this.state,t=e.make,a=e.model,s=e.submodel,n=e.style,i=e.year;this.props.onChange({make:t,model:a,submodel:s,style:n,year:i})}),this.setMake=(e=>{let t=e.niceName;this.setState({make:t,model:null,submodel:null,style:null},this.onChange)}),this.setModel=(e=>{let t=e.niceId;this.setState({model:t,submodel:null,style:null},this.onChange)}),this.setSubmodel=(e=>{let t=e.niceId,a=e.name,s=e.modelNiceId;this.setState({submodel:{niceId:t,name:a},model:s,style:null},this.onChange)}),this.setYear=(e=>{let t=e.year;this.setState({year:t,make:null,submodel:null,style:null,model:null},this.onChange)}),this.setStyle=(e=>{this.setState({style:e},this.onChange)}),this.state={}}static getDerivedStateFromProps(e,t){const a=e.prepopulatedVehicle,s=a.year,n=a.makeSlug,i=a.modelSlug,o=a.id,l=a.name,r=a.submodels;if(s&&t.prevPrepopulatedVehicle!==e.prepopulatedVehicle){const t={year:s.toString(),make:n,model:i,style:{id:o,name:l}};return r&&(t.submodel={niceId:r.slug,name:r.name}),t.prevPrepopulatedVehicle=e.prepopulatedVehicle,t}return{}}render(){const e=this.props,t=e.className,a=e.dropdownClassName,n=e.labelClassName,o=e.formGroupClassName,l=e.children,r=e.dropdownPlaceholders,c=e.dropdownLabels,u=e.dropdownTrackingIds,b=e.useStyledSelects,_=e.hasModelsDropdown,g=e.hasSubmodelsDropdown,S=e.hasStylesDropdown,v=e.displayError,f=e.errorMessages,C=e.hideLabels,N=e.useMostPopularStylesDropdown,T=e.rowClassName,O=e.colClassName,I=e.dropdownColSize,A=e.suffix,k=e.pubStates,V=e.onSubmit,x=this.state,R=x.make,U=x.model,M=x.submodel,F=x.style,Y=x.year,B=N?D:j;return i.a.createElement(d.a,{autoComplete:"off",className:t,onSubmit:V},i.a.createElement(p.a,{className:T},i.a.createElement(h.a,Object(s.a)({},I.year,{className:O}),i.a.createElement(m.a,{className:o},i.a.createElement(w.a,{name:"select-year",toggle:r.year,labelText:c.year,valueKey:"year",labelKey:"year",value:Y,onChange:this.setYear,onFocus:this.props.onFocus,className:a,labelClassName:n,"data-tracking-id":u.year,id:`ymms-select-year${A}`,isStyled:b,isLabelHidden:C,pubStates:k}),v.year&&i.a.createElement(E.a,{id:"yearError",classes:"mb-0 mt-0_25",error:f.year}))),i.a.createElement(h.a,Object(s.a)({},I.make,{className:O}),i.a.createElement(m.a,{className:o},i.a.createElement(y.a,{year:Y,name:"select-make",toggle:r.make,labelText:c.make,valueKey:"niceName",labelKey:"name",onChange:this.setMake,value:R,className:a,labelClassName:n,"data-tracking-id":u.make,id:`ymms-select-make${A}`,isStyled:b,isLabelHidden:C,pubStates:k}),v.make&&i.a.createElement(E.a,{id:"makeError",classes:"mb-0 mt-0_25",error:f.make}))),_&&i.a.createElement(h.a,Object(s.a)({},I.model,{className:O}),i.a.createElement(m.a,{className:o},i.a.createElement(P.a,{make:R,year:Y,name:"select-model",toggle:r.model,labelText:c.model,valueKey:"niceId",labelKey:"name",value:U,onChange:this.setModel,className:a,labelClassName:n,"data-tracking-id":u.model,id:`ymms-select-model${A}`,isStyled:b,isLabelHidden:C,pubStates:k}),v.model&&i.a.createElement(E.a,{id:"modelError",classes:"mb-0 mt-0_25",error:f.model}))),g&&i.a.createElement(h.a,Object(s.a)({},I.submodel,{className:O}),i.a.createElement(m.a,{className:o},i.a.createElement(L,{make:R,year:Y,name:"select-submodel",toggle:r.submodel,labelText:c.submodel,valueKey:"name",labelKey:"name",value:M&&M.name,onChange:this.setSubmodel,className:a,labelClassName:n,"data-tracking-id":u.submodel,id:`ymms-select-submodel${A}`,isStyled:b,isLabelHidden:C}),v.submodel&&i.a.createElement(E.a,{id:"submodelError",classes:"mb-0 mt-0_25",error:f.submodel}))),S&&i.a.createElement(h.a,Object(s.a)({},I.style,{className:O}),i.a.createElement(m.a,{className:o},i.a.createElement(B,{make:R,model:U,submodel:M,year:Y,withoutSubmodel:!g,name:"select-style",toggle:r.style,labelText:c.style,valueKey:"name",labelKey:"name",onChange:this.setStyle,value:F&&F.name,className:a,labelClassName:n,"data-tracking-id":u.style,id:`ymms-select-style${A}`,isStyled:b,isLabelHidden:C}),v.style&&i.a.createElement(E.a,{id:"styleError",classes:"mb-0 mt-0_25",error:f.style})))),l&&l({make:R,model:U,submodel:M,year:Y,style:F}))}}F.propTypes={children:l.a.func,onChange:l.a.func,onFocus:l.a.func,onSubmit:l.a.func,className:l.a.string,dropdownClassName:l.a.string,labelClassName:l.a.string,formGroupClassName:l.a.string,prepopulatedVehicle:l.a.shape({submodels:l.a.shape({name:l.a.string,slug:l.a.string}),id:l.a.oneOfType([l.a.number,l.a.string]),year:l.a.oneOfType([l.a.number,l.a.string]),makeSlug:l.a.string,modelSlug:l.a.string,name:l.a.string}),dropdownPlaceholders:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),dropdownLabels:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),dropdownTrackingIds:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),errorMessages:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),displayError:l.a.shape({make:l.a.bool,model:l.a.bool,year:l.a.bool,style:l.a.bool}),useStyledSelects:l.a.bool,hasModelsDropdown:l.a.bool,hasSubmodelsDropdown:l.a.bool,hasStylesDropdown:l.a.bool,hideLabels:l.a.bool,useMostPopularStylesDropdown:l.a.bool,rowClassName:l.a.string,colClassName:l.a.string,dropdownColSize:l.a.shape({year:M.Col.PropTypes,make:M.Col.PropTypes,model:M.Col.PropTypes,submodel:M.Col.PropTypes,style:M.Col.PropTypes}),suffix:l.a.string,pubStates:l.a.arrayOf(l.a.string)},F.defaultProps={children:null,className:null,dropdownClassName:null,onChange:()=>{},onFocus:()=>{},onSubmit:void 0,labelClassName:"dropdown-label label text-gray-dark mb-0_5",formGroupClassName:"mb-0",prepopulatedVehicle:{},dropdownLabels:{},dropdownTrackingIds:{},dropdownPlaceholders:{make:"Select",model:"Select",submodel:"Select",year:"Select",style:"Select"},errorMessages:{make:"Please select a make",model:"Please select a model",submodel:"Please select a model",year:"Please select a year",style:"Please select a style"},displayError:{},useStyledSelects:!1,hasModelsDropdown:!1,hasSubmodelsDropdown:!0,hasStylesDropdown:!0,hideLabels:!1,useMostPopularStylesDropdown:!1,rowClassName:null,colClassName:null,dropdownColSize:{year:M.Col.DefaultProps,make:M.Col.DefaultProps,model:M.Col.DefaultProps,submodel:M.Col.DefaultProps,style:M.Col.DefaultProps},suffix:"",pubStates:[_.a.NEW,_.a.NEW_USED,_.a.USED]}},"./site-modules/shared/utils/appraisal-link-constructor.js":function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return r});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("./site-modules/shared/utils/string.js"),o=a("./site-modules/shared/constants/appraisal/paths.js");function l(e){let t,a,o,l,r=e.make,d=e.model,c=e.year,m=e.queryParams,u=e.isAppExtensionPage;if(m){var p=m;t=p.styleIds,a=p.vin,o=p.colorId,l=Object(n.a)(p,["styleIds","vin","colorId"])}const b=[a?{vin:a}:{},t?{styleIds:t}:{},o?{colorId:o}:{},Object(s.a)({},l)],h=decodeURIComponent(b.map(e=>e?Object(i.f)(e):"").filter(e=>e).join("&"));let E=`/${r}/${d}/${c}/appraisal-value/`;return u&&(E+="index.app"),`${E}${h.length?"?":""}${h}`}function r(e){let t=e.isAppExtensionPage,a=o.b.APPRAISAL_LANDING;return t&&(a+="index.app"),a}},"./site-modules/shared/utils/appraisal/check-vin-inventory.js":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var s=a("./utils/event-toolbox.js"),n=a("./tracking/constant.js"),i=a("./data/api/api-client.js");const o=(e,t,a)=>{if(!e)return;const o=`/inventory/v5/vin/${e}`,l={event_type:n.b.EVENT_TYPE_ACTION_END,event_data:{action_name:n.b.ACTION_APPRAISE_VEHICLE,creative_id:t,action_category:n.b.USER_ACTION_CATEGORY,action_cause:n.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:n.b.SUBACTION_VIN_INVENTORY_CHECK}};i.c.fetch(o,{method:"GET"}).then(()=>{l.event_data.value=n.b.VIN_FOUND,s.a.fireTrackAction(l),a(!0)}).catch(()=>{l.event_data.value=n.b.VIN_NOT_FOUND,s.a.fireTrackAction(l),a(!1)})}},"./site-modules/shared/utils/appraiser/appraiser-validation-helper.js":function(e,t,a){"use strict";a.d(t,"m",function(){return _}),a.d(t,"f",function(){return y}),a.d(t,"h",function(){return g}),a.d(t,"l",function(){return S}),a.d(t,"j",function(){return v}),a.d(t,"a",function(){return f}),a.d(t,"g",function(){return C}),a.d(t,"c",function(){return T}),a.d(t,"d",function(){return O}),a.d(t,"b",function(){return I}),a.d(t,"e",function(){return A}),a.d(t,"p",function(){return P}),a.d(t,"q",function(){return k}),a.d(t,"t",function(){return V}),a.d(t,"s",function(){return x}),a.d(t,"r",function(){return L}),a.d(t,"k",function(){return w}),a.d(t,"o",function(){return R}),a.d(t,"n",function(){return U}),a.d(t,"i",function(){return D});a("../node_modules/core-js/modules/es6.regexp.replace.js");var s=a("../node_modules/lodash/reduce.js"),n=a.n(s),i=a("../node_modules/lodash/find.js"),o=a.n(i),l=a("../node_modules/lodash/isEmpty.js"),r=a.n(l),d=a("../node_modules/lodash/includes.js"),c=a.n(d),m=a("./site-modules/shared/constants/appraisal/appraisal.js"),u=a("./site-modules/shared/components/validation/validation-helper/validation-helper.js"),p=a("./site-modules/shared/components/form-validation/validation.js"),b=a("./site-modules/shared/utils/string.js");const h=(new Date).getFullYear(),E=1e3,_="zipCode",y="make",g="model",S="year",v="style",f="color",C="mileage",N=3e5,T="condition",O="epo-vin",I="conditionsQuestionsSection",A=new Map([[_,"Please enter your zip code"],[y,"Please select a make"],[g,"Please select a model"],[S,"Please select a year"],[v,"Please select a style"],[C,"Please enter vehicle mileage"],["mileageTooBigValue",`Mileage cannot be greater than ${Object(b.c)(N)}`],["mileageMinimumByModelYear","Please enter a valid mileage"],[T,"Please enter vehicle condition"],["vin",m.sb],[O,m.sb],["partnerOfferMileage","Please enter vehicle mileage"],[I,{singleQuestionErrorMessage:"Please answer this question",multipleQuestionsErrorMessage:"Please answer all of these questions"}]]);function j(e){return!!e}function P(e){const t=e.replace(/,/gm,"");return`${parseInt(t,10)||0}`}function k(e){return e.replace(/o/gi,"0").replace(/i/gi,"1").replace(/q/gi,"9").toUpperCase()}function V(e){return!!e.length&&u.a.validateZipCode({fieldValue:e})}function x(e){return p.a.validateVIN(e)}function L(e){return e&&Object.values(e).every(e=>e||!r()(e))}const w={[m.F]:[{fieldName:y,validators:[{test:j,message:A.get(y)}]},{fieldName:g,validators:[{test:j,message:A.get(g)}]},{fieldName:S,validators:[{test:j,message:A.get(S)}]},{fieldName:v,validators:[{test:j,message:A.get(v)}]},{fieldName:_,validators:[{test:V,message:A.get(_)}]}],[m.m]:[],[m.p]:[{fieldName:C,validators:[{test:function(e){return parseInt(P(e),10)>0},message:A.get(C)},{test:function(e){return parseInt(P(e),10)<=N},message:A.get("mileageTooBigValue")},{test:function(e,t){return!(t.styleYear<=h-2)||e>=E},message:A.get("mileageMinimumByModelYear")}]},{fieldName:T,validators:[{test:function(e){return!!e},message:A.get(T)},{test:function(e){return!c()(m.H,e)},message:"Please enter a non-damaged vehicle condition"}]}],[m.N]:[{fieldName:I,validators:[{test:L,message:A.get(I)}]}]};function R(e,t,a,s){const i=o()(w[e],e=>{return e.fieldName===t});return n()(i&&i.validators,(e,t)=>{let n=t.test;return e&&n(a,s)},!0)}function U(e,t,a,s){const i=o()(w[e],e=>{return e.fieldName===t});return n()(i&&i.validators,(e,t)=>{let n=t.test,i=t.message;return!e&&!n(a,s)&&i||e},void 0)}const D=[{input:f,selector:".colors-and-options-step"},{input:C,selector:".condition-mileage",options:{block:"end"}},{input:T,selector:".condition-and-mileage-step"},{input:I,selector:`[id^="${I}-error"]`}]},"./site-modules/shared/utils/vin-utils.js":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a("./site-modules/shared/components/form-validation/validation.js");const n=e=>s.a.validateVIN(e)&&`${e.substring(0,8)}${e.substring(9,11)}`}}]);
//# sourceMappingURL=13.chunk.3ea23a3f3a0c5c980ed2.js.map